<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/sass/main.min.2005bac08fea9f984d088cc097e64343345cd7ec419e82e7f12e4e0a21a791efd937755054c629c9ce1b911bec429935b92a6d1608219c876ba4b85c43037527.css integrity="sha512-IAW6wI/qn5hNCIzAl+ZDQzRc1+xBnoLn8S5OCiGnke/ZN3VQVMYpyc4bkRvsQpk1uSptFgghnIdrpLhcQwN1Jw=="><link rel=stylesheet href=/css/all.min.a0921f068fa9017ba1288b77420fbde17d89619431fab12b4d996e3e124af17337ac1b80bc2bb62458509e6033ace757405b5881b0c1d0db837dd64c8783b607.css integrity="sha512-oJIfBo+pAXuhKIt3Qg+94X2JYZQx+rErTZluPhJK8XM3rBuAvCu2JFhQnmAzrOdXQFtYgbDB0NuDfdZMh4O2Bw=="><title>Something Like Games | Latency correlates to Server FPS</title><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=description content="This post is about how the supposedly high network latencies with Godot come about."><meta itemprop=description content="This post is about how the supposedly high network latencies with Godot come about."><meta name=twitter:description content="This post is about how the supposedly high network latencies with Godot come about."><meta property="twitter:image" content="https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp"><meta property="og:description" content="This post is about how the supposedly high network latencies with Godot come about."><meta property="og:image" content="https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp"></head><body><nav class="navbar is-light" role=navigation aria-label="main navigation"><div class=navbar-brand><a href=/en/ class=navbar-item><img src=/images/brand.webp alt="Something Like Games" width=128px height=28></a>
<a role=checkbox class=navbar-burger aria-label=menu aria-expanded=false data-target=navigation><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=navigation class=navbar-menu><div class=navbar-end><div class=navbar-item><a href=/en/ class="nav link icon-text"><span class=icon><i class='fa fa-home'></i></span><span>Home</span></a></div><div class=navbar-item><a href=/en/contact/ class="nav link icon-text"><span class=icon><i class='fa fa-mail-bulk'></i></span><span>Contact</span></a></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link href=#>English (en)</a><div class="navbar-dropdown is-right"><a href=https://www.somethinglikegames.de/de/blog/2023/latency-correlates-to-server-fps/ lang=de class=navbar-item>Deutsch (de)</a></div></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-one-fifth"><section id=site-sidebar class=is-hidden-mobile><section id=site-intro class="block has-text-centered"><a href=/en/><img src=/images/logo.webp class=circle width=128px height=128px alt=somethinglikegames.de></a><header></header><main><p>My personal Blog about Game Development as a single person in part time</p></main><footer class="footer has-no-background"><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-74d13c028e></span>
<script id=cloaked-script-74d13c028e>var cloakElement=document.getElementById("cloaked-74d13c028e"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></footer></section><div class=block><hr></div><section id=categories class="block categories"><header><h1><a href=/en/categories><span class=icon-text><span class=icon><i class="fa fa-folders"></i></span><span>Categories</span></span></a></h1></header><ul><li><a href=/en/categories/tutorials/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>tutorials</span></span><span class=count>9</span></a><li><a href=/en/categories/misc/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>misc</span></span><span class=count>5</span></a><li><a href=/en/categories/news/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>news</span></span><span class=count>2</span></a></li></ul></section></section></div><div class=column><article class=card><div class=card-image><a href=/en/blog/2023/latency-correlates-to-server-fps/ class=cover-image style="--bg-image:url('https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp')"><img class=stretchV src=https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp alt></a></div><header class=card-header><div class=card-header-title><h2 class="title is-2"><a href=/en/blog/2023/latency-correlates-to-server-fps/>Latency correlates to Server FPS</a></h2></div></header><div class="card-content is-size-5 content"><div class=columns><div class=column><time datetime="2023-08-13 08:00:00 +0200 +0200">August 13, 2023</time></div></div><div class=columns><div class=column><div class=tags><span class="tag is-info is-light"><a href=/en/categories/misc/ class=has-text-info><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span>
<span>Misc</span></span></a></span>
<span class="tag is-link is-light"><a href=/en/tags/godot-engine/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Godot Engine</span></span></a></span>
<span class="tag is-link is-light"><a href=/en/tags/networking/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking</span></span></a></span></div></div></div><p>I had already shown in the <a href=/en/blog/2023/network-tutorial-5-login-3/#obtaining-connection-information>Tutorial to the World-Server-Login</a> that one can query the so-called packet round trip time (RTT) with an active ENet connection over <code>get_statistic(ENetPacketPeer.PEER_ROUND_TRIP_TIME)</code>. At that time I had received values in the range of 17ms and had wondered, but then left it at the following explanation attempt:</p><blockquote><p>One should not be surprised about the relatively high values ~15-20ms for the RTT in local tests. This may sound high at first, since the connection is local, but you have to consider that the RTT not only includes the way there and back, which is omitted locally, but also the processing time on the server.</p></blockquote><p>My comment at that time is not wrong, but kept very vague. This was because at the time I couldn&rsquo;t quite figure out why the processing time was so high, after all there was no interaction at all on the world server at that stage of the project. I filed this information away for now, thinking I might figure it out when I get a chance. A few weeks later, while researching the replication interval from the <a href=https://docs.godotengine.org/en/stable/classes/class_multiplayersynchronizer.html#class-multiplayersynchronizer-property-replication-interval target=_blank rel="noopener nofollow noreferrer"><code>MultiplayerSynchronizer</code></a>, I came across the following description:</p><blockquote><p>Time interval between synchronizations. When set to <code>0.0</code> (the default), synchronizations happen every network process frame.</p></blockquote><p>And I was wondering what exactly this &ldquo;network process frame&rdquo; is. Since I couldn&rsquo;t find anything else about it in the documentation, I asked in the networking channel of the <a href=https://chat.godotengine.org target=_blank rel="noopener nofollow noreferrer">Godot Contributors Chat</a> and got an answer from <em>fales</em> a little later:</p><blockquote><p>process frame is the func _process(delta), so it&rsquo;s the engine FPS.</p></blockquote><p>That&rsquo;s when it clicked for me ðŸ’¡. All incoming network messages are fetched from the network buffer once per frame and then processed. By default I work with a refresh rate of 60Hz, because my graphics card consumes less than 10W in idle. As a result, the server also runs at about 60 FPS. Thus, it processes the network messages 60 times per second, which results in a processing time of 1s Ã· 60 â‰ˆ 0.017s â‰™ 17ms and thus corresponds exactly to the determined RTT.</p><div class="message is-info"><div class=message-body>Godot does not limit the Max FPS by default, but since VSync is enabled in the default settings, the FPS will be adjusted to the frame rate.</div></div><p>So I finally had my explanation for these &ldquo;high&rdquo; latencies, although no network was involved at all. This knowledge will certainly be very helpful in the future. But if you plan to pass this information on to the players, you should let them know that this is the RTT and not just the &ldquo;ping&rdquo;. This correlation can also help us with development, because we can specifically simulate different latencies and try out how our games &ldquo;feel&rdquo; with which latency. Until now, I thought that this could only be achieved with the help of proxies.</p><p>You can set the max FPS via the property <code>application/run/max_fps</code>. So you can set it either in the code or in the project settings (Application -> Run -> Max FPS). When going through the project settings, don&rsquo;t forget to enable the &ldquo;Advanced settings&rdquo;.</p><p>And finally a short video how the example project &ldquo;feels&rdquo; at 6 server FPS, i.e. with an RTT of 160:</p><video controls autoplay>
<source src=/images/blog/2023/latency-correlates-to-server-fps/client_with_6_server_fps.webm type=video/webm>Your browser does not support the video tag.</video><p>Of course, it&rsquo;s stuttering, after all we have to keep in mind that we haven&rsquo;t dealt with client-side prediction yet. But if you pay close attention, you can see that a simple version of it is already integrated. Especially if you compare the movement of the character with the projectiles, which don&rsquo;t have any client-side prediction yet. The projectiles should serve as a small teaser for a next tutorial ðŸ˜‰.</p></div></article><footer class=columns><div class="column has-text-left"><a href=/en/blog/2023/material-synchronization/ class="button right"><span class=icon-text><span class=icon><i class="fa fa-angle-left"></i></span><span>Synchronizing materials with the MultiplayerSynchronizer</span></span></a></div><div class="column has-text-right"><a href=/en/blog/2024/the-past-present-and-future-of-slg/ class="button left"><span class=icon-text><span>About the past, present and future of this site</span><span class=icon><i class="fa fa-angle-right"></i></span></span></a></div></footer></div></div></div></section><footer class=footer><div class="container is-fluid has-text-centered"><ul class=socnet-icons><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-09b4e511b4></span>
<script id=cloaked-script-09b4e511b4>var cloakElement=document.getElementById("cloaked-09b4e511b4"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></ul><p class=copyright><a href=https://www.somethinglikegames.de/en/legal_notice/>Legal Notice</a> &mdash;
<a href=https://www.somethinglikegames.de/en/privacy_policy/>Privacy Policy</a> &mdash;
Â©2023-2024 Tobias Wink<br>Powered by <a href=https://gohugo.io/ title=0.109.0 target=_blank rel=noopener>Hugo</a></p></div></footer><script src=/js/navbar.min.js defer></script></body></html>