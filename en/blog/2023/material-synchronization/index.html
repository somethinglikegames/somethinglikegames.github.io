<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/sass/main.min.f6d044b67731fc418190a304668c848b0e240406fe652d5b63b8b82680bf6950585f1957e5bdc647161ed8b86a2ba218f28847056ae8f4c6c5d98d990c42f613.css integrity="sha512-9tBEtncx/EGBkKMEZoyEiw4kBAb+ZS1bY7i4JoC/aVBYXxlX5b3GRxYe2LhqK6IY8ohHBWro9MbF2Y2ZDEL2Ew=="><link rel=stylesheet href=/css/all.min.a0921f068fa9017ba1288b77420fbde17d89619431fab12b4d996e3e124af17337ac1b80bc2bb62458509e6033ace757405b5881b0c1d0db837dd64c8783b607.css integrity="sha512-oJIfBo+pAXuhKIt3Qg+94X2JYZQx+rErTZluPhJK8XM3rBuAvCu2JFhQnmAzrOdXQFtYgbDB0NuDfdZMh4O2Bw=="><title>Something Like Games | Synchronizing materials with the MultiplayerSynchronizer</title><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=description content="This tutorial is about showing possibilities how to synchronize more complex values."><meta itemprop=description content="This tutorial is about showing possibilities how to synchronize more complex values."><meta name=twitter:description content="This tutorial is about showing possibilities how to synchronize more complex values."><meta property="twitter:image" content="https://www.somethinglikegames.de/images/blog/2023/material-synchronization/intro.webp"><meta property="og:description" content="This tutorial is about showing possibilities how to synchronize more complex values."><meta property="og:image" content="https://www.somethinglikegames.de/images/blog/2023/material-synchronization/intro.webp"></head><body><nav class="navbar is-light" role=navigation aria-label="main navigation"><div class=navbar-brand><a href=/en/ class=navbar-item><img src=/images/brand.webp alt="Something Like Games" width=128px height=28></a>
<a role=checkbox class=navbar-burger aria-label=menu aria-expanded=false data-target=navigation><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=navigation class=navbar-menu><div class=navbar-end><div class=navbar-item><a href=/en/ class="nav link icon-text"><span class=icon><i class='fa fa-home'></i></span><span>Home</span></a></div><div class=navbar-item><a href=/en/contact/ class="nav link icon-text"><span class=icon><i class='fa fa-mail-bulk'></i></span><span>Contact</span></a></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link href=#>English (en)</a><div class="navbar-dropdown is-right"><a href=https://www.somethinglikegames.de/de/blog/2023/material-synchronization/ lang=de class=navbar-item>Deutsch (de)</a></div></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-one-fifth"><section id=site-sidebar class=is-hidden-mobile><section id=site-intro class="block has-text-centered"><a href=/en/><img src=/images/logo.webp class=circle width=128px height=128px alt=somethinglikegames.de></a><header></header><main><p>My personal Blog about Game Development as a single person in part time</p></main><footer class="footer has-no-background"><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-0093edf72b></span>
<script id=cloaked-script-0093edf72b>var cloakElement=document.getElementById("cloaked-0093edf72b"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></footer></section><div class=block><hr></div><section id=categories class="block categories"><header><h1><a href=/en/categories><span class=icon-text><span class=icon><i class="fa fa-folders"></i></span><span>Categories</span></span></a></h1></header><ul><li><a href=/en/categories/tutorials/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>tutorials</span></span><span class=count>9</span></a><li><a href=/en/categories/misc/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>misc</span></span><span class=count>3</span></a><li><a href=/en/categories/news/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>news</span></span><span class=count>2</span></a></li></ul></section></section></div><div class=column><article class=card><div class=card-image><a href=/en/blog/2023/material-synchronization/ class=cover-image style="--bg-image:url('https://www.somethinglikegames.de/images/blog/2023/material-synchronization/intro.webp')"><img class=stretchV src=https://www.somethinglikegames.de/images/blog/2023/material-synchronization/intro.webp alt="A progression of how the Godot logo changes color."></a><div class=copyright><a href=https://github.com/godotengine/godot/blob/master/LOGO_LICENSE.md class=has-text-grey target=_blank rel="noopener nofollow noreferrer">Godot Engine Logo is licensed under CC-BY-4.0 international</a></div></div><header class=card-header><div class=card-header-title><h2 class=title><a href=/en/blog/2023/material-synchronization/>Synchronizing materials with the MultiplayerSynchronizer</a></h2></div></header><div class="card-content is-size-5 content"><div class=columns><div class=column><time datetime="2023-08-05 12:00:00 +0200 +0200">August 5, 2023</time></div></div><div class=columns><div class=column><div class=tags><span class="tag is-info is-light"><a href=/en/categories/tutorials/ class=has-text-info><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span>
<span>Tutorials</span></span></a></span>
<span class="tag is-link is-light"><a href=/en/tags/godot-engine/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Godot Engine</span></span></a></span>
<span class="tag is-link is-light"><a href=/en/tags/networking/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking</span></span></a></span></div></div></div><p>A few days ago there was a discussion in the official Godot Discord server about how to manage to synchronize materials over the network. To understand the problem a bit better, I should perhaps first explain that you cannot transfer every datatype via RPC or <code>MultiplayerSynchronizer</code> over the network, but only scalar datatypes. Scalar datatypes generally include all datatypes that can contain only a single value, such as <code>int</code>, <code>float</code>, <code>Bool</code>, <code>String</code> or <code>StringName</code>.</p><p>Generally the whole topic is called serialization and it is about reading the variables or partly also objects from the memory and transforming them in such a way that variables / objects of the original type can be created again with identical contents. Serialization is therefore not only relevant for network transfers, but is also required when you want to save the game state, for example.</p><div class="message is-warning"><div class=message-body>My statement about the &ldquo;allowed&rdquo; data types is not quite correct. There are the functions <a href=https://docs.godotengine.org/en/stable/classes/class_@globalscope.html#class-globalscope-method-var-to-bytes-with-objects target=_blank rel="noopener nofollow noreferrer"><code>PackedByteArray var_to_bytes_with_objects(Variant variable)</code></a> and <a href=https://docs.godotengine.org/en/stable/classes/class_@globalscope.html#class-globalscope-method-bytes-to-var-with-objects target=_blank rel="noopener nofollow noreferrer"><code>Variant bytes_to_var_with_objects(PackedByteArray bytes)</code></a> which can be used to serialize and deserialize any object.<br>‚ö†Ô∏è In practice, however, you should be extremely careful with this, as it can also be used to transfer executable code, which is an extremely high security risk and should therefore not be used in practice, even if you really know what you are doing.</div></div><h3 class="title is-4" id=the-idea>The Idea</h3><p>Immediately after reading the question I also had already an idea how to solve the problem. But to really make sure that this idea works, I extended the <a href=https://github.com/somethinglikegames/godot4-network-tutorial/tree/interest-management target=_blank rel="noopener nofollow noreferrer">old known tutorial project</a> so that the clients can switch between three different materials with the tab key and all other clients get this material switch synchronized as well.</p><p>Strictly speaking it works a little bit different in practice:</p><ol><li>There is an enum <code>SupportedColors</code> which holds a value for all player materials. (<code>player.gd</code>)</li><li>There is a dictionary <code>colorToMaterial</code>, which maps all enum values to the corresponding stored materials. (<code>player.gd</code>)</li><li>The player gets a property <code>currentColor</code> of type <code>SupportedColors</code>,<ol><li>which always contains the enum value of the currently displayed material. (<code>player.gd</code>)</li><li>which in the setter, i.e. when the color is changed, replaces the material of the player mesh with the material from <code>colorToMaterial</code>. (<code>player.gd</code>)</li><li>which is synchronized by our MultiplayerSynchronizer <code>ServerSynchronizer</code> (Spawn, Watch). (<code>player.tscn</code>)</li></ol></li><li>When the tab key is pressed in one of the clients, this is signaled to the server using an RPC. (<code>player_input.gd</code>)</li><li>As soon as the server receives the material change request, it changes the value of <code>currentColor</code>. This is synchronized to all clients in range, calling their respective setters, which resulates in the material change of the game character mesh. (<code>player.gd</code>)</li></ol><h3 class="title is-4" id=the-practice>The Practice</h3><p>But enough of theory, as much as I like it, sometimes source code is more convincing. Before we can start, a few materials have to be created. For this example I have created three standard materials (<code>StandardMaterial3D</code>), for each of which I have set the albedo color (<code>albedo_color</code>) to red, green and blue respectively and saved them. With this preparation we can now start with the extension of the player (<code>player.gd</code>):</p><h4 class="title is-5" id=todo-1-and-2>ToDo 1 and 2</h4><p>Items 1 and 2 are implemented relatively quickly and should need no further words:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#66d9ef>const</span> colorToMaterial: <span style=color:#a6e22e>Dictionary</span> <span style=color:#f92672>=</span> { SupportedColors<span style=color:#f92672>.</span>GREEN: preload(<span style=color:#e6db74>&#34;res://materials/green.tres&#34;</span>),
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>										SupportedColors<span style=color:#f92672>.</span>BLUE: preload(<span style=color:#e6db74>&#34;res://materials/blue.tres&#34;</span>),
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>										SupportedColors<span style=color:#f92672>.</span>RED: preload(<span style=color:#e6db74>&#34;res://materials/red.tres&#34;</span>),
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>										}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#66d9ef>enum</span> SupportedColors { GREEN, BLUE, RED}</span></span></code></pre></div><h4 class="title is-5" id=todo-3>ToDo 3</h4><p>Then we take care of items 3.1 and 3.2 by creating our property <code>currentColor</code> and writing the corresponding setter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>var</span> currentColor : SupportedColors <span style=color:#f92672>=</span> SupportedColors<span style=color:#f92672>.</span>GREEN:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>	set(color):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>		currentColor <span style=color:#f92672>=</span> color
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>		<span style=color:#66d9ef>if</span> is_ready:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>			mesh<span style=color:#f92672>.</span>surface_set_material(<span style=color:#ae81ff>0</span>, colorToMaterial[currentColor])
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>onready</span> <span style=color:#66d9ef>var</span> mesh: <span style=color:#a6e22e>Mesh</span> <span style=color:#f92672>=</span> <span style=color:#f92672>$</span>MeshInstance3D<span style=color:#f92672>.</span>mesh</span></span></code></pre></div><p>The <code>is_ready</code> property is just to prevent us from setting the material before we have access to the mesh. For this to work, we need two more lines:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-gdscript data-lang=gdscript><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span><span style=color:#66d9ef>var</span> is_ready :<span style=color:#f92672>=</span> false
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span><span style=color:#66d9ef>func</span> _ready() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>	is_ready <span style=color:#f92672>=</span> true
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>	<span style=color:#66d9ef>if</span> player <span style=color:#f92672>==</span> multiplayer<span style=color:#f92672>.</span>get_unique_id():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>		<span style=color:#f92672>$</span>Camera3D<span style=color:#f92672>.</span>current <span style=color:#f92672>=</span> true</span></span></code></pre></div><p>After adding the property, we can also extend the replication configuration of our <code>ServerSynchronizer</code> appropriately:</p><figure class="title is-6 is-centered"><img src=/images/blog/2023/material-synchronization/server_synchronizer_replication.webp alt="Replication tab of ServerSynchronizer"><figcaption><h4>Replication tab of ServerSynchronizer</h4></figcaption></figure><h4 class="title is-5" id=todo-4>ToDo 4</h4><p>In implementing the RPC for item 4, I used the same mechanism as in the <a href=/en/tags/networking-tutorial/>previous article</a> for jumping (<code>player_input.gd</code>). First, we add a property representing the client&rsquo;s material change request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>var</span> switch_color :<span style=color:#f92672>=</span> false</span></span></code></pre></div><p>Then we create the function that we call via RPC:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#960050;background-color:#1e0010>@</span>rpc(<span style=color:#e6db74>&#34;call_local&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#66d9ef>func</span> color_switch() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>	switch_color <span style=color:#f92672>=</span> true</span></span></code></pre></div><p>And finally, we extend our <code>_process()</code> function to connect the tab key to the RPC:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#66d9ef>func</span> _process(delta: <span style=color:#a6e22e>float</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>	direction <span style=color:#f92672>=</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span>get_vector(<span style=color:#e6db74>&#34;ui_left&#34;</span>, <span style=color:#e6db74>&#34;ui_right&#34;</span>, <span style=color:#e6db74>&#34;ui_up&#34;</span>, <span style=color:#e6db74>&#34;ui_down&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span>is_action_just_pressed(<span style=color:#e6db74>&#34;ui_accept&#34;</span>):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>		jump<span style=color:#f92672>.</span>rpc_id(MultiplayerPeer<span style=color:#f92672>.</span>TARGET_PEER_SERVER)
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span>is_action_just_pressed(<span style=color:#e6db74>&#34;ui_focus_next&#34;</span>):
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>		color_switch<span style=color:#f92672>.</span>rpc_id(MultiplayerPeer<span style=color:#f92672>.</span>TARGET_PEER_SERVER)</span></span></code></pre></div><h4 class="title is-5" id=todo-5>ToDo 5</h4><p>Last but not least, the response to the material change request that will connect all our puzzle pieces (<code>player.gd</code>) is still missing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span><span style=color:#66d9ef>func</span> _process(_delta: <span style=color:#a6e22e>float</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>	<span style=color:#66d9ef>if</span> input<span style=color:#f92672>.</span>switch_color:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span>		input<span style=color:#f92672>.</span>switch_color <span style=color:#f92672>=</span> false
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span>		match currentColor:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span>			SupportedColors<span style=color:#f92672>.</span>GREEN:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span>				currentColor <span style=color:#f92672>=</span> SupportedColors<span style=color:#f92672>.</span>BLUE
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span><span>			SupportedColors<span style=color:#f92672>.</span>BLUE:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span><span>				currentColor <span style=color:#f92672>=</span> SupportedColors<span style=color:#f92672>.</span>RED
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span><span>			SupportedColors<span style=color:#f92672>.</span>RED:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span><span>				currentColor <span style=color:#f92672>=</span> SupportedColors<span style=color:#f92672>.</span>GREEN</span></span></code></pre></div><h4 class="title is-5" id=the-final-step>The final step</h4><figure class="title is-6 is-pulled-right"><img src=/images/blog/2023/material-synchronization/meshinstance3d_inspector.webp alt=MeshInstance3D><figcaption><h4>MeshInstance3D</h4></figcaption></figure><p>If you want to try our previous expansion at this point, you will notice that a lot of things already work. Pressing the tab key will change the material and thus the color of the character, but at the same time the material of every other character will change as well.</p><p>This is because all scenes share the respective resources by default. If by a client the mesh material is changed, this will automatically happen for all other game characters as well, since they all use the same mesh. To change this, we still need to set a small, but crucial, hook in the mesh resource configuration, namely the one behind &ldquo;Local to Scene&rdquo;, as shown quite far down in the accompanying image. This causes all instances of the scene, i.e. all existing game characters, to use their own meshes.</p><p>In general, it&rsquo;s a good idea for the engine to try to save as many resources as possible. Only, unfortunately, I didn&rsquo;t think of this myself right away during my experiments and was already afraid that I had made programming mistakes. Through a little debugging I then realized that the source code does everything as it was intended and then fortunately I remembered that the game characters share the mesh üòì.</p><h4 class="title is-4" id=conclusion>Conclusion</h4><p>What is shown here is of course very rudimentary, but should clarify the general methodology. Of course, you can extend this as much as you like or even modify it for other use cases. For example, to offer a ColorPicker to the client, one could simply transfer the RGBA values and adjust the albedo color of the current mesh material based on them. As August Heinrich Hoffmann von Fallersleben said: &ldquo;<em>Thoughts are free, &mldr;</em>&rdquo;.</p><p>Of course you can find the complete source code in my <a href=https://github.com/somethinglikegames/godot4-network-tutorial/tree/material_replication target=_blank rel="noopener nofollow noreferrer">Tutorial Repository</a>.</p></div></article><footer class=columns><div class="column has-text-left"><a href=/en/blog/2023/interest-management-with-multiplayersynchronizer/ class="button right"><span class=icon-text><span class=icon><i class="fa fa-angle-left"></i></span><span>Interest Management mit dem MultiplayerSynchronizer</span></span></a></div><div class="column has-text-right"></div></footer></div></div></div></section><footer class=footer><div class="container is-fluid has-text-centered"><ul class=socnet-icons><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-efebad03cb></span>
<script id=cloaked-script-efebad03cb>var cloakElement=document.getElementById("cloaked-efebad03cb"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></ul><p class=copyright><a href=https://www.somethinglikegames.de/en/legal_notice/>Legal Notice</a> &mdash;
<a href=https://www.somethinglikegames.de/en/privacy_policy/>Privacy Policy</a> &mdash;
¬©2023 Tobias Wink<br>Powered by <a href=https://gohugo.io/ title=0.109.0 target=_blank rel=noopener>Hugo</a></p></div></footer><script src=/js/navbar.min.js defer></script>
<script src=/js/copy-code-button.min.js defer></script></body></html>