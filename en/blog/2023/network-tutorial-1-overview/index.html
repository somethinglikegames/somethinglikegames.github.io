<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/sass/main.min.f6d044b67731fc418190a304668c848b0e240406fe652d5b63b8b82680bf6950585f1957e5bdc647161ed8b86a2ba218f28847056ae8f4c6c5d98d990c42f613.css integrity="sha512-9tBEtncx/EGBkKMEZoyEiw4kBAb+ZS1bY7i4JoC/aVBYXxlX5b3GRxYe2LhqK6IY8ohHBWro9MbF2Y2ZDEL2Ew=="><link rel=stylesheet href=/css/all.min.a0921f068fa9017ba1288b77420fbde17d89619431fab12b4d996e3e124af17337ac1b80bc2bb62458509e6033ace757405b5881b0c1d0db837dd64c8783b607.css integrity="sha512-oJIfBo+pAXuhKIt3Qg+94X2JYZQx+rErTZluPhJK8XM3rBuAvCu2JFhQnmAzrOdXQFtYgbDB0NuDfdZMh4O2Bw=="><title>Something Like Games | Networking tutorial 1: General information and overview</title><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=description content="This article is the start of a tutorial series on network programming with Godot 4, so here is an overview of the topics covered and some more general information."><meta itemprop=description content="This article is the start of a tutorial series on network programming with Godot 4, so here is an overview of the topics covered and some more general information."><meta name=twitter:description content="This article is the start of a tutorial series on network programming with Godot 4, so here is an overview of the topics covered and some more general information."><meta property="twitter:image" content="https://www.somethinglikegames.de/images/blog/2023/network-tutorial-1-overview/godot_networking.webp"><meta property="og:description" content="This article is the start of a tutorial series on network programming with Godot 4, so here is an overview of the topics covered and some more general information."><meta property="og:image" content="https://www.somethinglikegames.de/images/blog/2023/network-tutorial-1-overview/godot_networking.webp"></head><body><nav class="navbar is-light" role=navigation aria-label="main navigation"><div class=navbar-brand><a href=/en/ class=navbar-item><img src=/images/brand.webp alt="Something Like Games" width=128px height=28></a>
<a role=checkbox class=navbar-burger aria-label=menu aria-expanded=false data-target=navigation><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=navigation class=navbar-menu><div class=navbar-end><div class=navbar-item><a href=/en/ class="nav link icon-text"><span class=icon><i class='fa fa-home'></i></span><span>Home</span></a></div><div class=navbar-item><a href=/en/contact/ class="nav link icon-text"><span class=icon><i class='fa fa-mail-bulk'></i></span><span>Contact</span></a></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link href=#>English (en)</a><div class="navbar-dropdown is-right"><a href=https://www.somethinglikegames.de/de/blog/2023/network-tutorial-1-overview/ lang=de class=navbar-item>Deutsch (de)</a></div></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-one-fifth"><section id=site-sidebar class=is-hidden-mobile><section id=site-intro class="block has-text-centered"><a href=/en/><img src=/images/logo.webp class=circle width=128px height=128px alt=somethinglikegames.de></a><header></header><main><p>My personal Blog about Game Development as a single person in part time</p></main><footer class="footer has-no-background"><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-c4728acf05></span>
<script id=cloaked-script-c4728acf05>var cloakElement=document.getElementById("cloaked-c4728acf05"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></footer></section><div class=block><hr></div><section id=categories class="block categories"><header><h1><a href=/en/categories><span class=icon-text><span class=icon><i class="fa fa-folders"></i></span><span>Categories</span></span></a></h1></header><ul><li><a href=/en/categories/tutorials/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>tutorials</span></span><span class=count>8</span></a><li><a href=/en/categories/misc/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>misc</span></span><span class=count>3</span></a><li><a href=/en/categories/news/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>news</span></span><span class=count>2</span></a></li></ul></section></section></div><div class=column><article class=card><div class=card-image><a href=/en/blog/2023/network-tutorial-1-overview/ class=cover-image style="--bg-image:url('https://www.somethinglikegames.de/images/blog/2023/network-tutorial-1-overview/godot_networking.webp')"><img class=cover src=https://www.somethinglikegames.de/images/blog/2023/network-tutorial-1-overview/godot_networking.webp alt="Godot Engine Logos that 'communicate' with each other"></a><div class=copyright><a href=https://github.com/godotengine/godot/blob/master/LOGO_LICENSE.md class=has-text-grey target=_blank rel="noopener nofollow noreferrer">Godot Engine Logo is licensed under CC-BY-4.0 international</a></div></div><header class=card-header><div class=card-header-title><h2 class=title><a href=/en/blog/2023/network-tutorial-1-overview/>Networking tutorial 1: General information and overview</a></h2></div></header><div class="card-content is-size-5 content"><div class=columns><div class=column><time datetime="2023-01-29 12:00:00 +0100 +0100">January 29, 2023</time></div></div><div class=columns><div class=column><div class=tags><span class="tag is-info is-light"><a href=/en/categories/tutorials/ class=has-text-info><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span>
<span>Tutorials</span></span></a></span>
<span class="tag is-link is-light"><a href=/en/tags/networking-tutorial/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking-Tutorial</span></span></a></span>
<span class="tag is-link is-light"><a href=/en/tags/godot-engine/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Godot Engine</span></span></a></span>
<span class="tag is-link is-light"><a href=/en/tags/networking/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking</span></span></a></span></div></div></div><p>Godot 4 is on its way to the first release candidate. <a href=https://godotengine.org/article/dev-snapshot-godot-4-0-beta-1/ target=_blank rel="noopener nofollow noreferrer">The difference between Godot 3.x and Godot 4 is huge</a>. While there are already various tutorials on many of the changes, it seems to me that the area of network programming has been neglected and that although, or maybe because, there have been <a href=https://godotengine.org/article/multiplayer-changes-godot-4-0-report-1/ target=_blank rel="noopener nofollow noreferrer">a lot of changes</a> there as well. In addition, I&rsquo;m particularly interested in this part, because so far almost only pure multiplayer games have managed to fascinate me for a long time and I can use my professional experience in this area.</p><p>Since the topic is so huge that a book could probably be written about it, I will cover it as part of a tutorial series. The following list shows all articles of this series that have been published so far:</p><ol><li>Networking tutorial 1: General information and overview</li><li><a href=/en/blog/2023/network-tutorial-2-walking-skeleton/>Networking tutorial 2: The "walking skeleton"</a></li><li><a href=/en/blog/2023/network-tutorial-3-login-1/>Networking tutorial 3: Login 1 - The game client</a></li><li><a href=/en/blog/2023/network-tutorial-4-login-2/>Networking tutorial 4: Login 2 - gateway and authentication server</a></li><li><a href=/en/blog/2023/network-tutorial-5-login-3/>Networking tutorial 5: Login 3 - world server</a></li><li><a href=/en/blog/2023/network-tutorial-6-dtls/>Networking tutorial 6: Encrypted connections using DTLS</a></li></ol><h3 class="title is-4" id=overview>Overview</h3><p>This tutorial series is intended to get you started with network programming using Godot 4. For this reason, everything created in this series will be created with the current Godot 4 version, even though this may not necessarily be the case in reality, as there are better technologies for certain tasks. But before we get into the practice in the next article, I&rsquo;d like to first talk about some subjects that influence the chosen architecture, and then present the architecture I&rsquo;m targeting.</p><p>If you are thinking about the topic of server architecture for pure multiplayer games without any previous experience, you will probably come up with such an idea first:</p><figure class="title is-6"><img src=/images/blog/2023/network-tutorial-1-overview/dedicated-server-first-draft.webp alt="Game clients can communicate directly with the single dedicated game server via the Internet."><figcaption><h4>Game clients can communicate directly with the single dedicated game server via the Internet.</h4></figcaption></figure><p>It is possible that in these initial considerations it is still in mind that the dedicated server may still need a database, but this is currently only a minor detail. There are certainly many problems with a single dedicated server, but in my opinion the biggest ones are:</p><ol><li>Security</li><li>Scalability</li></ol><p>The server architecture for pure multiplayer games must perform at least two tasks: Authenticate new clients and then handle game-relevant communication with all clients. Authentication requires user data, which should not fall into the wrong hands under any circumstances, but in this case are located on a server that is directly connected to the Internet. Especially since access cannot be restricted to certain IP addresses, as this would turn away potential players. We don&rsquo;t even have to start talking about non-availability in this scenario. When the server is down, neither multiplayer is available, nor are players able to change their user data.<br>The number of possible players is generally dependent on various factors, which I will discuss in more detail in the <a href=#bottlenecks>next section</a>, but a certain upper limit is omnipresent. So if you want to move the limit up, you will need several servers, and not every server should store all user data.</p><h3 id=bottlenecks class="title is-4">Potential bottlenecks</h3><p>There are several factors that influence the number of simultaneously connected players per server:</p><ol><li>Maximum number of concurrent connected players</li><li>Requests per second (RPS)</li><li>Number of players that can be reasonably fit on the game world/map</li></ol><p>When using <a href=http://enet.bespin.org/ target=_blank rel="noopener nofollow noreferrer">ENet</a> with Godot, there is an upper limit of <a href=https://docs.godotengine.org/en/latest/classes/class_enetmultiplayerpeer.html#class-enetmultiplayerpeer-method-create-server target=_blank rel="noopener nofollow noreferrer">4095 simultaneous connections</a>, which means that more players per server are not possible for now. If you still want to support more than ~4k players simultaneously in a game world, you have to distribute the game world over several servers. To do this, the game world is divided into zones and these zones are distributed to the servers. Optimally, this distribution is done dynamically at runtime depending on the respective workload to save resources. But the already high complexity increases significantly due to the distribution to several servers, because solutions have to be developed to enable players to change servers, e.g. when changing zones, in the best case without the players noticing this. But the topic is so complex that it justifies its own articles.<br>The required number of requests per second (RPS) depends on the selected genre. In fast and interaction-rich genres such as first-person shooters, it is essential to have as many RPS as possible so that all game clients receive their necessary game data (e.g. own position, positions of the other players, positions of &ldquo;visible&rdquo; opponents) as quickly as possible in order to display them almost without delay so that the player can react. For games like FarmVille it is also sufficient to have only a few RPS, because on the one hand the multiplayer is used only little as far as I know and on the other hand it is not so relevant for the game, where exactly visitors of the own farm are located. Of course, the number of RPS that can be realistically achieved also depends on how complex the server-side calculations are and how much computing capacity is available.<br>To create a good gaming experience for players, the number of players should be appropriate for the map size, genre, and core game mechanics. For competitive games, the map size should be large enough that opposing players (teams) do not spawn right next to each other, but small enough that opposing players (teams) still meet in a timely manner. In <a href=https://www.huntshowdown.com/game target=_blank rel="noopener nofollow noreferrer">Hunt:Showdown</a>, a core game mechanic is that actually everything in the game world makes noise that can be well localized thanks to <a href=https://en.wikipedia.org/wiki/3D_audio_effect target=_blank rel="noopener nofollow noreferrer">3D Spatial Audio</a>, so many players try to stay stealthy for as long as possible. To account for this game mechanic, the map is very sparsely &ldquo;populated&rdquo; by players with 1 square kilometer for a maximum of 12 players divided into an average of 6 teams. In (M)MORPGs, the world is usually designed for hundreds to thousands of players, but despite this, there are always situations where certain areas are completely overrun, so that questing is then unthinkable. Anyone who wanted to play when a WoW expansion launched knows what I mean by that.</p><h3 class="title is-4" id=the-targeted-architecture-for-the-tutorial>The targeted architecture for the tutorial</h3><figure class="title is-6"><img src=/images/blog/2023/network-tutorial-1-overview/desired_network_architecture.webp alt="The game clients obtain a token from the Authentication Server via the gateway, which they need to establish a connection to the World Server."><figcaption><h4>The game clients obtain a token from the Authentication Server via the gateway, which they need to establish a connection to the World Server.</h4></figcaption></figure><p>The figure illustrates the architecture that will be created in the course of this tutorial series. It consists of three different types of servers:</p><dl><dt><strong>Gateway Server</strong></dt><dd>Protects the Authentication Server from direct access via internet and forwards only valid requests to the Authentication Server.</dd><dt><strong>Authentication Server</strong></dt><dd>Has access to the user data to validate login data and issues a token to access the World Server if the login data is valid.</dd><dt><strong>World Server</strong></dt><dd>Validates issued tokens and provides the actual game. In this example, each world server has its own player data, i.e. it is a game with persistent data, e.g. an (M)MORPG.</dd></dl><p>Besides the architecture, you can also see the communication in the figure:</p><ol><li>the game client sends the login data to one of the gateway servers</li><li>the gateway server forwards the login data to the authentication server, which then verifies them</li><li>the result is sent to the gateway server:<ol><li>in the positive case a token</li><li>in the negative case, an error code</li></ol></li><li>the gateway server forwards the result to the game client</li><li>if the game client has received a token, it sends the token to the desired world server</li><li>the world server validates the token and if it is valid, the actual game starts.</li></ol><p>In my opinion, this architecture forms a good way to learn and understand network programming with Godot 4. Your own game will certainly have different requirements, but this gives you a good basis to then adapt it to your own needs.</p></div></article><footer class=columns><div class="column has-text-left"><a href=/en/blog/2023/status-of-godot-4/ class="button right"><span class=icon-text><span class=icon><i class="fa fa-angle-left"></i></span><span>Is Godot 4 ready for AA- or even AAA?</span></span></a></div><div class="column has-text-right"><a href=/en/blog/2023/network-tutorial-2-walking-skeleton/ class="button left"><span class=icon-text><span>Networking tutorial 2: The "walking skeleton"</span><span class=icon><i class="fa fa-angle-right"></i></span></span></a></div></footer></div></div></div></section><footer class=footer><div class="container is-fluid has-text-centered"><ul class=socnet-icons><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-dd2f66ac20></span>
<script id=cloaked-script-dd2f66ac20>var cloakElement=document.getElementById("cloaked-dd2f66ac20"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></ul><p class=copyright><a href=https://www.somethinglikegames.de/en/legal_notice/>Legal Notice</a> &mdash;
<a href=https://www.somethinglikegames.de/en/privacy_policy/>Privacy Policy</a> &mdash;
©2023 Tobias Wink<br>Powered by <a href=https://gohugo.io/ title=0.109.0 target=_blank rel=noopener>Hugo</a></p></div></footer><script src=/js/navbar.min.js defer></script></body></html>