<!doctype html><html lang=de><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/sass/main.min.2005bac08fea9f984d088cc097e64343345cd7ec419e82e7f12e4e0a21a791efd937755054c629c9ce1b911bec429935b92a6d1608219c876ba4b85c43037527.css integrity="sha512-IAW6wI/qn5hNCIzAl+ZDQzRc1+xBnoLn8S5OCiGnke/ZN3VQVMYpyc4bkRvsQpk1uSptFgghnIdrpLhcQwN1Jw=="><link rel=stylesheet href=/css/all.min.a0921f068fa9017ba1288b77420fbde17d89619431fab12b4d996e3e124af17337ac1b80bc2bb62458509e6033ace757405b5881b0c1d0db837dd64c8783b607.css integrity="sha512-oJIfBo+pAXuhKIt3Qg+94X2JYZQx+rErTZluPhJK8XM3rBuAvCu2JFhQnmAzrOdXQFtYgbDB0NuDfdZMh4O2Bw=="><title>Something Like Games | Netzwerklatenz korreliert mit Server-FPS</title><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=description content="In diesem Artikel geht es um das Zustandekommen der vermeintlich hohen Netzwerklatenzen mit Godot."><meta itemprop=description content="In diesem Artikel geht es um das Zustandekommen der vermeintlich hohen Netzwerklatenzen mit Godot."><meta name=twitter:description content="In diesem Artikel geht es um das Zustandekommen der vermeintlich hohen Netzwerklatenzen mit Godot."><meta property="twitter:image" content="https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp"><meta property="og:description" content="In diesem Artikel geht es um das Zustandekommen der vermeintlich hohen Netzwerklatenzen mit Godot."><meta property="og:image" content="https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp"></head><body><nav class="navbar is-light" role=navigation aria-label="main navigation"><div class=navbar-brand><a href=/de/ class=navbar-item><img src=/images/brand.webp alt="Something Like Games" width=128px height=28></a>
<a role=checkbox class=navbar-burger aria-label=menu aria-expanded=false data-target=navigation><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=navigation class=navbar-menu><div class=navbar-end><div class=navbar-item><a href=/de/ class="nav link icon-text"><span class=icon><i class='fa fa-home'></i></span><span>Home</span></a></div><div class=navbar-item><a href=/de/contact/ class="nav link icon-text"><span class=icon><i class='fa fa-mail-bulk'></i></span><span>Kontakt</span></a></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link href=#>Deutsch (de)</a><div class="navbar-dropdown is-right"><a href=https://www.somethinglikegames.de/en/blog/2023/latency-correlates-to-server-fps/ lang=en class=navbar-item>English (en)</a></div></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-one-fifth"><section id=site-sidebar class=is-hidden-mobile><section id=site-intro class="block has-text-centered"><a href=/de/><img src=/images/logo.webp class=circle width=128px height=128px alt=somethinglikegames.de></a><header></header><main><p>Mein pers√∂nlicher Blog √ºber Spieleentwicklung als Einzelperson in Teilzeit</p></main><footer class="footer has-no-background"><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-c285a88a01></span>
<script id=cloaked-script-c285a88a01>var cloakElement=document.getElementById("cloaked-c285a88a01"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></footer></section><div class=block><hr></div><section id=categories class="block categories"><header><h1><a href=/de/categories><span class=icon-text><span class=icon><i class="fa fa-folders"></i></span><span>Kategorien</span></span></a></h1></header><ul><li><a href=/de/categories/tutorials/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>tutorials</span></span><span class=count>9</span></a><li><a href=/de/categories/misc/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>misc</span></span><span class=count>5</span></a><li><a href=/de/categories/news/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>news</span></span><span class=count>2</span></a></li></ul></section></section></div><div class=column><article class=card><div class=card-image><a href=/de/blog/2023/latency-correlates-to-server-fps/ class=cover-image style="--bg-image:url('https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp')"><img class=stretchV src=https://www.somethinglikegames.de/images/blog/2023/latency-correlates-to-server-fps/intro.webp alt></a></div><header class=card-header><div class=card-header-title><h2 class="title is-2"><a href=/de/blog/2023/latency-correlates-to-server-fps/>Netzwerklatenz korreliert mit Server-FPS</a></h2></div></header><div class="card-content is-size-5 content"><div class=columns><div class=column><time datetime="2023-08-13 08:00:00 +0200 +0200">13.08.2023</time></div></div><div class=columns><div class=column><div class=tags><span class="tag is-info is-light"><a href=/de/categories/misc/ class=has-text-info><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span>
<span>Misc</span></span></a></span>
<span class="tag is-link is-light"><a href=/de/tags/godot-engine/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Godot Engine</span></span></a></span>
<span class="tag is-link is-light"><a href=/de/tags/networking/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking</span></span></a></span></div></div></div><p>Ich hatte ja bereits im <a href=/de/blog/2023/network-tutorial-5-login-3/#erlangen-von-verbindungsinformationen>Tutorial zum World-Server-Login</a> gezeigt, dass man bei einer aktiven ENet-Verbindung √ºber <code>get_statistic(ENetPacketPeer.PEER_ROUND_TRIP_TIME)</code>, die sogenannte Paketumlaufzeit bzw. Round-Trip-Time (RTT) abfragen kann. Ich hatte damals Werte im Bereich 17ms erhalten und mich zwar gewundert, es dann aber bei folgendem Erkl√§rungsversuch belassen:</p><blockquote><p>Man darf sich √ºber die relativ hohen Werte ~15-20ms f√ºr die RTT bei lokalen Tests nicht wundern. Das klingt zwar im ersten Moment hoch, da die Verbindung ja lokal ist, aber man muss bedenken, dass die RTT nicht nur Hin- und R√ºckweg beinhaltet, was ja lokal entf√§llt, sondern auch die Verarbeitungszeit auf dem Server beinhaltet.</p></blockquote><p>Mein damaliger Kommentar ist nicht falsch, aber sehr vage gehalten. Das lag daran, dass ich mir zu diesem Zeitpunkt nicht ganz erkl√§ren konnte, warum die Verarbeitungszeit so hoch ist, schlie√ülich gab es zum damaligen Projektstand keinerlei Interaktion auf dem World-Server. Ich habe diese Information erst einmal f√ºr mich abgelegt und dachte, ich werde es bei Gelegenheit vielleicht herausfinden. Einige Wochen sp√§ter bin ich bei der Recherche zum Replikationsintervall vom <a href=https://docs.godotengine.org/en/stable/classes/class_multiplayersynchronizer.html#class-multiplayersynchronizer-property-replication-interval target=_blank rel="noopener nofollow noreferrer"><code>MultiplayerSynchronizer</code></a> auf folgende Beschreibung gesto√üen:</p><blockquote><p>Time interval between synchronizations. When set to <code>0.0</code> (the default), synchronizations happen every network process frame.</p></blockquote><p>Und ich habe mich gefragt, was genau dieser &ldquo;network process frame&rdquo; ist. Da ich in der Dokumentation nichts weiter dazu finden konnte, habe ich irgendwann im networking-Kanal des <a href=https://chat.godotengine.org target=_blank rel="noopener nofollow noreferrer">Godot Contributors Chat</a> nachgefragt und hatte wenig sp√§ter eine Antwort von <em>fales</em> dazu:</p><blockquote><p>process frame is the func _process(delta), so it&rsquo;s the engine FPS.</p></blockquote><p>Da hat es bei mir dann Klick gemacht üí°. Alle ankommenden Netzwerknachrichten werden also einmal pro Frame aus dem Netzwerkpuffer abgeholt und anschlie√üend verarbeitet. Standardm√§√üig arbeite ich mit einer Bildwiederholfrequenz von 60Hz, weil meine Grafikkarte so im Idle unter 10W verbraucht. Die Folge davon ist, dass der Server ebenfalls mit ca. 60 FPS l√§uft. Somit bearbeitet er 60 mal pro Sekunde die Netzwerknachrichten, was in einer Verarbeitungszeit von 1s √∑ 60 ‚âà 0,017s ‚âô 17ms resultiert und damit genau der ermittelten RTT entspricht.</p><div class="message is-info"><div class=message-body>Godot limitiert zwar standardm√§√üig die Max FPS nicht, aber da VSync in den Standardeinstellungen aktiviert ist, werden die FPS auf die Bildwiederholfrequenz abgestimmt.</div></div><p>Damit hatte ich also endlich meine Erkl√§rung f√ºr diese &ldquo;hohen&rdquo; Latenzen, obwohl gar kein Netzwerk involviert war. Dieses Wissen wird sicherlich auch in Zukunft sehr hilfreich sein. Doch wenn man vorhat, diese Information an die Spieler weiterzugeben, sollte man sie dar√ºber in Kenntniss setzen, dass es sich dabei um die RTT handelt und nicht nur um den &ldquo;Ping&rdquo;. Diese Korrelation kann uns ebenfalls bei der Entwicklung unterst√ºtzen, denn wir k√∂nnen gezielt unterschiedliche Latenzen simulieren und so ausprobieren, wie sich unsere Spiele mit welcher Latenz &ldquo;anf√ºhlen&rdquo;. Bislang dachte ich, dies nur mit Hilfe von Proxies erreichen zu k√∂nnen.</p><p>Einstellen kann man die Max FPS √ºber das Property <code>application/run/max_fps</code>. Daher kann man es entweder √ºber den Code oder aber in den Projekteinstellungen (Anwendung -> Ausf√ºhren -> Max. FPS) setzen. Beim Weg √ºber die Projekteinstellungen nicht vergessen, die &ldquo;Erweiterten Einstellungen&rdquo; zu aktivieren.</p><p>Und zum Schluss noch ein kurzes Video, wie sich das Beispielprojekt bei 6 Server-FPS, also mit einer RTT von 160, &ldquo;anf√ºhlt&rdquo;:</p><video controls autoplay>
<source src=/images/blog/2023/latency-correlates-to-server-fps/client_with_6_server_fps.webm type=video/webm>Your browser does not support the video tag.</video><p>Nat√ºrlich ist es ruckelig, schlie√ülich m√ºssen wir bedenken, dass wir uns bislang noch nicht mit Client-Side-Prediction besch√§ftigt haben. Aber achtet man genau darauf, kann man erkennen, dass davon bereits eine einfache Version integriert ist. Besonders wenn man die Bewegung der Spielfigur mit den Projektilen vergleicht, die noch keinerlei Client-Side-Prediction haben. Die Projektile sollen dann schon mal als kleiner Teaser f√ºr ein n√§chstes Tutorial dienen üòâ.</p></div></article><footer class=columns><div class="column has-text-left"><a href=/de/blog/2023/material-synchronization/ class="button right"><span class=icon-text><span class=icon><i class="fa fa-angle-left"></i></span><span>Synchronisieren von Materialien mit dem MultiplayerSynchronizer</span></span></a></div><div class="column has-text-right"><a href=/de/blog/2024/the-past-present-and-future-of-slg/ class="button left"><span class=icon-text><span>√úber die Vergangenheit, Gegenwart und Zukunft dieser Seite</span><span class=icon><i class="fa fa-angle-right"></i></span></span></a></div></footer></div></div></div></section><footer class=footer><div class="container is-fluid has-text-centered"><ul class=socnet-icons><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-186f36521d></span>
<script id=cloaked-script-186f36521d>var cloakElement=document.getElementById("cloaked-186f36521d"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></ul><p class=copyright><a href=https://www.somethinglikegames.de/de/legal_notice/>Impressum</a> &mdash;
<a href=https://www.somethinglikegames.de/de/privacy_policy/>Datenschutzerkl√§rung</a> &mdash;
¬©2023-2024 Tobias Wink<br>Powered by <a href=https://gohugo.io/ title=0.109.0 target=_blank rel=noopener>Hugo</a></p></div></footer><script src=/js/navbar.min.js defer></script></body></html>