<!doctype html><html lang=de><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/sass/main.min.f6d044b67731fc418190a304668c848b0e240406fe652d5b63b8b82680bf6950585f1957e5bdc647161ed8b86a2ba218f28847056ae8f4c6c5d98d990c42f613.css integrity="sha512-9tBEtncx/EGBkKMEZoyEiw4kBAb+ZS1bY7i4JoC/aVBYXxlX5b3GRxYe2LhqK6IY8ohHBWro9MbF2Y2ZDEL2Ew=="><link rel=stylesheet href=/css/all.min.a0921f068fa9017ba1288b77420fbde17d89619431fab12b4d996e3e124af17337ac1b80bc2bb62458509e6033ace757405b5881b0c1d0db837dd64c8783b607.css integrity="sha512-oJIfBo+pAXuhKIt3Qg+94X2JYZQx+rErTZluPhJK8XM3rBuAvCu2JFhQnmAzrOdXQFtYgbDB0NuDfdZMh4O2Bw=="><title>Something Like Games | Netzwerktutorial 2: Das "gehende Skelett"</title><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=description content="Setup des Grundgerüsts des Netzwerktutorials inklusive Gründe für bestimmte Vorgehensweisen"><meta itemprop=description content="Setup des Grundgerüsts des Netzwerktutorials inklusive Gründe für bestimmte Vorgehensweisen"><meta name=twitter:description content="Setup des Grundgerüsts des Netzwerktutorials inklusive Gründe für bestimmte Vorgehensweisen"><meta property="twitter:image" content="https://www.somethinglikegames.de/images/blog/2023/network-tutorial-2-walking-skeleton/walking_skeleton.webp"><meta property="og:description" content="Setup des Grundgerüsts des Netzwerktutorials inklusive Gründe für bestimmte Vorgehensweisen"><meta property="og:image" content="https://www.somethinglikegames.de/images/blog/2023/network-tutorial-2-walking-skeleton/walking_skeleton.webp"></head><body><nav class="navbar is-light" role=navigation aria-label="main navigation"><div class=navbar-brand><a href=/de/ class=navbar-item><img src=/images/brand.webp alt="Something Like Games" width=128px height=28></a>
<a role=checkbox class=navbar-burger aria-label=menu aria-expanded=false data-target=navigation><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=navigation class=navbar-menu><div class=navbar-end><div class=navbar-item><a href=/de/ class="nav link icon-text"><span class=icon><i class='fa fa-home'></i></span><span>Home</span></a></div><div class=navbar-item><a href=/de/contact/ class="nav link icon-text"><span class=icon><i class='fa fa-mail-bulk'></i></span><span>Kontakt</span></a></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link href=#>Deutsch (de)</a><div class="navbar-dropdown is-right"><a href=https://www.somethinglikegames.de/en/blog/2023/network-tutorial-2-walking-skeleton/ lang=en class=navbar-item>English (en)</a></div></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-one-fifth"><section id=site-sidebar class=is-hidden-mobile><section id=site-intro class="block has-text-centered"><a href=/de/><img src=/images/logo.webp class=circle width=128px height=128px alt=somethinglikegames.de></a><header></header><main><p>Mein persönlicher Blog über Spieleentwicklung als Einzelperson in Teilzeit</p></main><footer class="footer has-no-background"><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-6d6e796d8f></span>
<script id=cloaked-script-6d6e796d8f>var cloakElement=document.getElementById("cloaked-6d6e796d8f"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></footer></section><div class=block><hr></div><section id=categories class="block categories"><header><h1><a href=/de/categories><span class=icon-text><span class=icon><i class="fa fa-folders"></i></span><span>Kategorien</span></span></a></h1></header><ul><li><a href=/de/categories/tutorials/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>tutorials</span></span><span class=count>9</span></a><li><a href=/de/categories/misc/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>misc</span></span><span class=count>5</span></a><li><a href=/de/categories/news/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>news</span></span><span class=count>2</span></a></li></ul></section></section></div><div class=column><article class=card><div class=card-image><a href=/de/blog/2023/network-tutorial-2-walking-skeleton/ class=cover-image style="--bg-image:url('https://www.somethinglikegames.de/images/blog/2023/network-tutorial-2-walking-skeleton/walking_skeleton.webp')"><img class=cover src=https://www.somethinglikegames.de/images/blog/2023/network-tutorial-2-walking-skeleton/walking_skeleton.webp alt="A walking skeleton"></a><div class=copyright><a href=https://docs.midjourney.com/docs/terms-of-service class=has-text-grey target=_blank rel="noopener nofollow noreferrer"><img src=/images/cc-by-nc.webp alt=cc-by-nc> Midjourney</a></div></div><header class=card-header><div class=card-header-title><h2 class="title is-2"><a href=/de/blog/2023/network-tutorial-2-walking-skeleton/>Netzwerktutorial 2: Das "gehende Skelett"</a></h2></div></header><div class="card-content is-size-5 content"><div class=columns><div class=column><time datetime="2023-02-12 11:00:00 +0100 +0100">12.02.2023</time></div></div><div class=columns><div class=column><div class=tags><span class="tag is-info is-light"><a href=/de/categories/tutorials/ class=has-text-info><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span>
<span>Tutorials</span></span></a></span>
<span class="tag is-link is-light"><a href=/de/tags/networking-tutorial/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking-Tutorial</span></span></a></span>
<span class="tag is-link is-light"><a href=/de/tags/godot-engine/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Godot Engine</span></span></a></span>
<span class="tag is-link is-light"><a href=/de/tags/networking/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking</span></span></a></span></div></div></div><p>Der Quellcode zu den Artikeln ist in diesem <a href=https://github.com/somethinglikegames/godot4-network-tutorial target=_blank rel="noopener nofollow noreferrer">GitHub Repository</a> zu finden. Die folgende Liste zeigt alle bislang erschienenen Artikel dieser Serie:</p><ol><li><a href=/de/blog/2023/network-tutorial-1-overview/>Netzwerktutorial 1: Allgemeines und Übersicht</a></li><li>Netzwerktutorial 2: Das "gehende Skelett"</li><li><a href=/de/blog/2023/network-tutorial-3-login-1/>Netzwerktutorial 3: Login 1 - Der Game-Client</a></li><li><a href=/de/blog/2023/network-tutorial-4-login-2/>Netzwerktutorial 4: Login 2 - Gateway- und Authentication-Server</a></li><li><a href=/de/blog/2023/network-tutorial-5-login-3/>Netzwerktutorial 5: Login 3 - World-Server</a></li><li><a href=/de/blog/2023/network-tutorial-6-dtls/>Netzwerktutorial 6: Verschlüsselte Verbindungen mit Hilfe von DTLS</a></li></ol><p>Ich habe wirklich lange über die <em>richtige</em> Vorgehensweise für dieses Tutorial nachgedacht. Schließlich gibt es verschiedene Möglichkeiten, wenn man, wie hier, die aktuell geplanten vier Komponenten entwickeln möchte. Ein Extremfall wäre es, pro Tutorial jeweils eine Komponente vollständig zu entwickeln und dadurch erst zum Schluss die Kommunikation zwischen den Komponenten zu ermöglichen. Ich habe mich für eine andere Variante entschieden und setze alle Komponenten direkt ohne wirkliche Funktionalität auf, um sie anschließend in jedem Tutorial, passend zum Thema, mit weiteren Inhalten zu füllen.</p><p>Diese Vorgehensweise nennt sich auch <a href=https://www.techtarget.com/whatis/definition/walking-skeleton target=_blank rel="noopener nofollow noreferrer">Walking Skeleton</a>. Geprägt wurde der Begriff wohl Ende der 1990er Jahre durch <a href=https://de.wikipedia.org/wiki/Alistair_Cockburn target=_blank rel="noopener nofollow noreferrer">Alistair Cockburn</a>, einen der Pioniere der <a href=https://www.redhat.com/de/devops/what-is-agile-methodology target=_blank rel="noopener nofollow noreferrer">agilen Softwareentwicklung</a>. Leider befindet sich <a href=https://alistair.cockburn.us/ target=_blank rel="noopener nofollow noreferrer">seine Website</a> zum Zeitpunkt der Erstellung dieses Artikels im Umbau, aber dank der <a href=https://web.archive.org/ target=_blank rel="noopener nofollow noreferrer">Wayback Machine</a>, habe ich dann doch noch das von mir <a href=https://web.archive.org/web/20160711143859/http://alistair.cockburn.us/Walking+skeleton target=_blank rel="noopener nofollow noreferrer">gesuchte Zitat</a> zum Walking Skeleton von ihm gefunden:</p><blockquote><p>A Walking Skeleton is a tiny implementation of the system that performs a small end-to-end function. It need not use the final architecture, but it should link together the main architectural components. The architecture and the functionality can then evolve in parallel.</p></blockquote><p>Der erste Schritt zum <em>gehenden Skelett</em> ist, alle notwendigen Projekte anzulegen. In unserem Fall sind es also die vier Godot-Projekte &ldquo;Authentication Server&rdquo;, &ldquo;Gateway Server&rdquo;, &ldquo;World Server&rdquo; und &ldquo;Game Client&rdquo;. Da die Server-Projekte alle als Headless-Projekte geplant sind, also ohne graphische Komponente, nutzen diese als Renderer <em>Compatibility</em>, während der Game Client <em>Forward+</em> verwendet, aber der Renderer spielt für diese Tutorialserie eigentlich keine wirkliche Rolle. Theoretisch ist es auch möglich, alle Teilkomponenten innerhalb eines Godot-Projekts zu realisieren, aber durch die Modularisierung wird es nicht nur übersichtlicher, sondern auch sicherer, da der Game Client nur die für ihn notwendigen Informationen enthält.</p><p>Um die Server auch im Editor <em>headless</em> zu starten, muss man jeweils in <code>Projekteinstellungen -> Editor -> Main Run Args</code> den Wert <code>--display-driver headless</code> eintragen.</p><h3 class="title is-4" id=genereller-projektaufbau>Genereller Projektaufbau</h3><p>Damit die Projekte fehlerfrei per Netzwerk kommunizieren können, müssen die <code>SceneTrees</code> der beteiligten Parteien identisch aufgebaut sein. Das lässt sich am einfachsten erreichen, indem man die Projekte möglichst identisch aufbaut, daher nutze ich hier folgende Projektstruktur:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── scenes
</span></span><span style=display:flex><span>│   ├── network
</span></span><span style=display:flex><span>│   │   ├── authentication_server.gd
</span></span><span style=display:flex><span>│   │   ├── gateway_server.gd
</span></span><span style=display:flex><span>│   │   └── world_server.gd
</span></span><span style=display:flex><span>│   ├── main.gd
</span></span><span style=display:flex><span>│   └── main.tscn
</span></span><span style=display:flex><span>└── icon.svg</span></span></code></pre></div><p>Welche Skripte innerhalb des &ldquo;network&rdquo;-Ordners vorhanden sind, hängt natürlich davon ab, welche Serverfunktionalität bereitgestellt wird bzw. mit welchem Server das jeweilige Projekt kommunizieren soll. Wenn man sich die geplante Architektur aus dem <a href=/de/blog/2023/network-tutorial-1-overview/>letzten Artikel</a> nochmals in Erinnerung ruft und die Kommunikationswege betrachtet, kommt man auf die folgenden Skripte:</p><dl><dt>Authentication-Server</dt><dd><code>authentication_server.gd</code></dd><dt>Gateway-Server</dt><dd><code>authentication_server.gd</code>, <code>gateway_server.gd</code></dd><dt>World-Server</dt><dd><code>world_server.gd</code></dd><dt>Game Client</dt><dd><code>authentication_server.gd</code>, <code>world_server.gd</code></dd></dl><h3 id=the-server-base class="title is-4">Das Server-Grundgerüst</h3><p>Wir fangen mit folgendem Grundgerüst für die Server an:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Node</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>export_range(<span style=color:#ae81ff>1025</span>, <span style=color:#ae81ff>65536</span>) <span style=color:#66d9ef>var</span> network_port :<span style=color:#f92672>=</span> <span style=color:#ae81ff>1911</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>export_range(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4095</span>) <span style=color:#66d9ef>var</span> max_clients :<span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> startup() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> network :<span style=color:#f92672>=</span> ENetMultiplayerPeer<span style=color:#f92672>.</span>new()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> ret :<span style=color:#f92672>=</span> network<span style=color:#f92672>.</span>create_server(network_port, max_clients)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> ret <span style=color:#f92672>==</span> OK:
</span></span><span style=display:flex><span>		get_multiplayer()<span style=color:#f92672>.</span>set_multiplayer_peer(network)
</span></span><span style=display:flex><span>		print(<span style=color:#e6db74>&#34;Server started on port </span><span style=color:#e6db74>%d</span><span style=color:#e6db74>, allowing max </span><span style=color:#e6db74>%d</span><span style=color:#e6db74> connections&#34;</span>
</span></span><span style=display:flex><span>				<span style=color:#f92672>%</span> [network_port, max_clients])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		network<span style=color:#f92672>.</span>peer_connected<span style=color:#f92672>.</span>connect(
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>func</span>(client_id: <span style=color:#a6e22e>int</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span>				print(<span style=color:#e6db74>&#34;Client </span><span style=color:#e6db74>%d</span><span style=color:#e6db74> connected&#34;</span> <span style=color:#f92672>%</span> client_id)
</span></span><span style=display:flex><span>				)
</span></span><span style=display:flex><span>		network<span style=color:#f92672>.</span>peer_disconnected<span style=color:#f92672>.</span>connect(
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>func</span>(client_id: <span style=color:#a6e22e>int</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span>				print(<span style=color:#e6db74>&#34;Client </span><span style=color:#e6db74>%d</span><span style=color:#e6db74> disconnected&#34;</span> <span style=color:#f92672>%</span> client_id)
</span></span><span style=display:flex><span>				)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>		print(<span style=color:#e6db74>&#34;Error while starting server: </span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> ret)
</span></span><span style=display:flex><span>		get_tree()<span style=color:#f92672>.</span>quit(ret)</span></span></code></pre></td></tr></table></div></div><p>In den Zeilen 3 und 4 werden die konfigurierbaren Parameter exportiert. So kann man sie auch direkt im Editor anpassen. Wichtig ist, dass jeder Server seinen eigenen Netzwerkport bekommt. In der Funktion <code>startup()</code> wird der ENet-Server gestartet. Dafür erstellen wir in Zeile 8 zunächst ein neues Objekt vom Typ <code>ENetMultiplayerPeer</code>, um damit in Zeile 9 den ENet-Server zu starten. Falls dies erfolgreich war, hinterlegen wir unseren gestarteten ENet-Server in unserem aktuellen <a href=https://docs.godotengine.org/en/latest/classes/class_multiplayerapi.html#class-multiplayerapi-property-multiplayer-peer target=_blank rel="noopener nofollow noreferrer">MultiplayerAPI-Objekt</a>, geben eine kurze Erfolgsmeldung aus und verknüpfen anschließend die Signale, um mitzubekommen, wenn sich jemand verbunden bzw. die Verbindung getrennt hat (Zeilen 11-22). Zum Start nutzen wir dafür einfache <a href=https://docs.godotengine.org/en/latest/tutorials/scripting/gdscript/gdscript_basics.html#lambda-functions target=_blank rel="noopener nofollow noreferrer">Lambdas</a>, die uns aktuell erst einmal nur Logmeldungen ausgeben. Sollte beim Start des Servers etwas schiefgelaufen sein, geben wir eine Fehlermeldung aus und beenden anschließend den Prozess (Zeilen 23-24).</p><h3 class="title is-4" id=das-startszene-der-server>Das Startszene der Server</h3><figure class="is-pulled-left title is-6"><img src=/images/blog/2023/network-tutorial-2-walking-skeleton/scene_tree_authentication_server.webp alt="SceneTree des Authentication-Servers"><figcaption><h4>SceneTree des Authentication-Servers.</h4></figcaption></figure><p><code>main.tscn</code> wird bei allen Projekten als Startszene genutzt und startet entweder die jeweiligen Netzwerkkomponenten oder fungiert im Client als <em>SceneHandler</em>, welcher als zentrale Komponente für das Management von Szenen und (Netzwerk-)Ressourcen dient. Daher kann der Aufbau von <code>main.tscn</code> auf dem Server simpel gehalten werden. Wie im Bild gezeigt, ist es ein <code>Node</code> namens &ldquo;Main&rdquo; mit <code>Nodes</code> für jede Netzwerkkomponente, die das zugehörige Netzwerkskript verknüpft haben. Beim Authentication-Server sieht das dann so aus:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Node</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>onready</span> <span style=color:#66d9ef>var</span> authentication_server :<span style=color:#f92672>=</span> <span style=color:#f92672>$</span>AuthenticationServer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> _ready() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span>	get_tree()<span style=color:#f92672>.</span>set_multiplayer(SceneMultiplayer<span style=color:#f92672>.</span>new(),
</span></span><span style=display:flex><span>		<span style=color:#f92672>^</span><span style=color:#e6db74>&#34;/root/Main/AuthenticationServer&#34;</span>)
</span></span><span style=display:flex><span>	authentication_server<span style=color:#f92672>.</span>startup()</span></span></code></pre></td></tr></table></div></div><p>Wenn man Erfahrungen mit Godot 3.x hat, werden die Zeilen 7-8 wahrscheinlich etwas ungewöhnlich aussehen. Mit Godot 4 wurde <code>custom_multiplayer</code> <a href=https://github.com/godotengine/godot/pull/57647 target=_blank rel="noopener nofollow noreferrer">entfernt</a> und stattdessen wurde die Funktion <a href=https://docs.godotengine.org/en/latest/classes/class_scenetree.html#class-scenetree-method-set-multiplayer target=_blank rel="noopener nofollow noreferrer"><code>set_multiplayer</code></a> im <code>SceneTree</code> so erweitert, dass man nun unterschiedliche <a href=https://docs.godotengine.org/en/latest/classes/class_multiplayerapi.html#class-multiplayerapi-property-multiplayer-peer target=_blank rel="noopener nofollow noreferrer"><code>MultiplayerAPI</code></a>-Objekte abhängig vom <a href=https://docs.godotengine.org/en/latest/classes/class_nodepath.html target=_blank rel="noopener nofollow noreferrer"><code>NodePath</code></a> hinterlegen kann, um mehr als eine Netzwerkkomponente betreiben/nutzen zu können. Das ist zwar eigentlich im Authentication-Server gar nicht notwendig, schließlich besitzt er nur eine Netzwerkkomponente, aber bei meinen Experimenten habe ich feststellen dürfen, dass es zu Kommunikationsproblemen zwischen Gateway- und Authentication-Server geführt hat, wenn der Authentication-Server nicht auf diese Weise konfiguriert war.</p><p>Auf eine ähnliche Weise sind auch die anderen zwei Server aufgebaut. Beim Gateway-Server verwenden wir den Netzwerkport <code>1910</code> und beim World-Server <code>1909</code>. Der bisherige Quellcode wird natürlich auch im <a href=https://github.com/somethinglikegames/godot4-network-tutorial/tree/network-tutorial-2-walking-skeleton target=_blank rel="noopener nofollow noreferrer">GitHub Repository</a> abgebildet. Im nächsten Artikel werden wir dann anfangen, den Login-Vorgang des Game Clients zu realisieren.</p></div></article><footer class=columns><div class="column has-text-left"><a href=/de/blog/2023/network-tutorial-1-overview/ class="button right"><span class=icon-text><span class=icon><i class="fa fa-angle-left"></i></span><span>Netzwerktutorial 1: Allgemeines und Übersicht</span></span></a></div><div class="column has-text-right"><a href=/de/blog/2023/network-tutorial-3-login-1/ class="button left"><span class=icon-text><span>Netzwerktutorial 3: Login 1 - Der Game-Client</span><span class=icon><i class="fa fa-angle-right"></i></span></span></a></div></footer></div></div></div></section><footer class=footer><div class="container is-fluid has-text-centered"><ul class=socnet-icons><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-a47396a25f></span>
<script id=cloaked-script-a47396a25f>var cloakElement=document.getElementById("cloaked-a47396a25f"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></ul><p class=copyright><a href=https://www.somethinglikegames.de/de/legal_notice/>Impressum</a> &mdash;
<a href=https://www.somethinglikegames.de/de/privacy_policy/>Datenschutzerklärung</a> &mdash;
©2023-2024 Tobias Wink<br>Powered by <a href=https://gohugo.io/ title=0.109.0 target=_blank rel=noopener>Hugo</a></p></div></footer><script src=/js/navbar.min.js defer></script>
<script src=/js/copy-code-button.min.js defer></script></body></html>