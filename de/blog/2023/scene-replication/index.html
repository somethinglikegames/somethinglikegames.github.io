<!doctype html><html lang=de><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/sass/main.min.f6d044b67731fc418190a304668c848b0e240406fe652d5b63b8b82680bf6950585f1957e5bdc647161ed8b86a2ba218f28847056ae8f4c6c5d98d990c42f613.css integrity="sha512-9tBEtncx/EGBkKMEZoyEiw4kBAb+ZS1bY7i4JoC/aVBYXxlX5b3GRxYe2LhqK6IY8ohHBWro9MbF2Y2ZDEL2Ew=="><link rel=stylesheet href=/css/all.min.a0921f068fa9017ba1288b77420fbde17d89619431fab12b4d996e3e124af17337ac1b80bc2bb62458509e6033ace757405b5881b0c1d0db837dd64c8783b607.css integrity="sha512-oJIfBo+pAXuhKIt3Qg+94X2JYZQx+rErTZluPhJK8XM3rBuAvCu2JFhQnmAzrOdXQFtYgbDB0NuDfdZMh4O2Bw=="><title>Something Like Games | Scene Replication mit Godot 4(.1)</title><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta name=description content="In diesem Tutorial geht es um die Integration von 'Scene Replication', sodass Objekte und/oder Property-√Ñnderungen automatisch an alle Netzwerkteilnehmer repliziert werden."><meta itemprop=description content="In diesem Tutorial geht es um die Integration von 'Scene Replication', sodass Objekte und/oder Property-√Ñnderungen automatisch an alle Netzwerkteilnehmer repliziert werden."><meta name=twitter:description content="In diesem Tutorial geht es um die Integration von 'Scene Replication', sodass Objekte und/oder Property-√Ñnderungen automatisch an alle Netzwerkteilnehmer repliziert werden."><meta property="twitter:image" content="https://www.somethinglikegames.de/images/blog/2023/scene-replication/intro.webp"><meta property="og:description" content="In diesem Tutorial geht es um die Integration von 'Scene Replication', sodass Objekte und/oder Property-√Ñnderungen automatisch an alle Netzwerkteilnehmer repliziert werden."><meta property="og:image" content="https://www.somethinglikegames.de/images/blog/2023/scene-replication/intro.webp"></head><body><nav class="navbar is-light" role=navigation aria-label="main navigation"><div class=navbar-brand><a href=/de/ class=navbar-item><img src=/images/brand.webp alt="Something Like Games" width=128px height=28></a>
<a role=checkbox class=navbar-burger aria-label=menu aria-expanded=false data-target=navigation><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=navigation class=navbar-menu><div class=navbar-end><div class=navbar-item><a href=/de/ class="nav link icon-text"><span class=icon><i class='fa fa-home'></i></span><span>Home</span></a></div><div class=navbar-item><a href=/de/contact/ class="nav link icon-text"><span class=icon><i class='fa fa-mail-bulk'></i></span><span>Kontakt</span></a></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link href=#>Deutsch (de)</a><div class="navbar-dropdown is-right"><a href=https://www.somethinglikegames.de/en/blog/2023/scene-replication/ lang=en class=navbar-item>English (en)</a></div></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-one-fifth"><section id=site-sidebar class=is-hidden-mobile><section id=site-intro class="block has-text-centered"><a href=/de/><img src=/images/logo.webp class=circle width=128px height=128px alt=somethinglikegames.de></a><header></header><main><p>Mein pers√∂nlicher Blog √ºber Spieleentwicklung als Einzelperson in Teilzeit</p></main><footer class="footer has-no-background"><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-0457b552fb></span>
<script id=cloaked-script-0457b552fb>var cloakElement=document.getElementById("cloaked-0457b552fb"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></footer></section><div class=block><hr></div><section id=categories class="block categories"><header><h1><a href=/de/categories><span class=icon-text><span class=icon><i class="fa fa-folders"></i></span><span>Kategorien</span></span></a></h1></header><ul><li><a href=/de/categories/tutorials/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>tutorials</span></span><span class=count>9</span></a><li><a href=/de/categories/misc/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>misc</span></span><span class=count>5</span></a><li><a href=/de/categories/news/><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span><span>news</span></span><span class=count>2</span></a></li></ul></section></section></div><div class=column><article class=card><div class=card-image><a href=/de/blog/2023/scene-replication/ class=cover-image style="--bg-image:url('https://www.somethinglikegames.de/images/blog/2023/scene-replication/intro.webp')"><img class=stretchV src=https://www.somethinglikegames.de/images/blog/2023/scene-replication/intro.webp alt="A cute and tiny robot with big eyes interacts with a machine to make a clone of himself. The machine has a camera to replicate the robot."></a><div class=copyright><a href=https://huggingface.co/spaces/stabilityai/stable-diffusion class=has-text-grey target=_blank rel="noopener nofollow noreferrer">Generated with Stable Diffusion 2.1</a></div></div><header class=card-header><div class=card-header-title><h2 class=title><a href=/de/blog/2023/scene-replication/>Scene Replication mit Godot 4(.1)</a></h2></div></header><div class="card-content is-size-5 content"><div class=columns><div class=column><time datetime="2023-07-11 18:40:00 +0100 +0100">11.07.2023</time></div></div><div class=columns><div class=column><div class=tags><span class="tag is-info is-light"><a href=/de/categories/tutorials/ class=has-text-info><span class=icon-text><span class=icon><i class="fa fa-folder"></i></span>
<span>Tutorials</span></span></a></span>
<span class="tag is-link is-light"><a href=/de/tags/godot-engine/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Godot Engine</span></span></a></span>
<span class="tag is-link is-light"><a href=/de/tags/networking/ class=has-text-link><span class=icon-text><span class=icon><i class="fa fa-tag"></i></span>
<span>Networking</span></span></a></span></div></div></div><p>Bei diesem Artikel m√∂chte ich mich vorab schon entschuldigen, dass die Positionen von Text und Bildern nicht immer ganz stimmig sind. Leider ist mir keine bessere Positionierung eingefallen, aber ich hoffe, ihr k√∂nnt es verkraften. Im heutigen Tutorial soll es nun nach der <a href=/de/tags/networking-tutorial/>Tutorialserie</a>, die ein gutes Grundger√ºst bietet, mal um ein Thema gehen, was man auch wirklich sehen kann. Das hier gezeigte Beispiel basiert dabei auf einem <a href=https://godotengine.org/article/multiplayer-in-godot-4-0-scene-replication/ target=_blank rel="noopener nofollow noreferrer">Blog-Artikel</a> von Fabio Alessandrelli, einem der Hauptentwickler f√ºr die Godot-Netzwerkfunktionalit√§t. Und da ich nicht alles nur kopieren m√∂chte, erfahrt ihr hier, wie ihr die dort gezeigten Techniken auch bei Nutzung von pfadabh√§ngigen <a href=https://docs.godotengine.org/en/stable/classes/class_multiplayerapi.html#class-multiplayerapi target=_blank rel="noopener nofollow noreferrer">MultiplayerAPIs</a> einsetzen k√∂nnt.</p><div class="message is-info"><div class=message-body>Um diesem Tutorial folgen zu k√∂nnen, braucht ihr nicht unbedingt das Projekt aus meiner <a href=/de/tags/networking-tutorial/>Tutorialserie</a>, aber es schadet auch nicht üòâ. Die bisherigen Godot-Projekte findet ihr im zugeh√∂rigen <a href=https://github.com/somethinglikegames/godot4-network-tutorial/tree/network-tutorial-6-dtls target=_blank rel="noopener nofollow noreferrer">Github-Repository</a>. Alternativ reicht es aber aus, ein Godot-Projekt zu haben, welches bereits eine Netzwerkverbindung zwischen Client und Server herstellen kann.</div></div><p>Wir wollen uns heute mit <em>Scene Replication</em> besch√§ftigen. Mit diesem Begriff beschreibt man die Aufgabe, die aktuelle Spielszenerie, also bspw. Level, Spielerpositionen, etc., an alle verbundenen GameClients zu senden. So wird versucht, allen GameClients ein (m√∂glichst) identisches Bild √ºber das aktuelle Spielgeschehen zu vermitteln. Es gibt, wie so oft, verschiedene Ans√§tze daf√ºr. Um das Cheating-Potential m√∂glichst gering zu halten, sollte man bei Netzwerkspielen immer auf autorit√§re Server setzen. Dies bedeutet, dass der GameClient &ldquo;dumm&rdquo; ist und lediglich Eingaben registriert, diese an den Server sendet und ansonsten die vom Server √ºbermittelte Spielszenerie anzeigt. Alle Berechnungen bzgl. Positions√§nderungen, Aktionen und deren Auswirkungen etc. werden vom Server get√§tigt.</p><div class="message is-info"><div class=message-body>In der heutigen Zeit ist dies nicht mehr ganz zutreffend, da man heutzutage versucht, die Latenz, die durch die Netzwerkkommunikation notgedrungen entsteht, zu kompensieren, indem man bestimmte Berechnungen zus√§tzlich vom GameClient ausf√ºhren l√§sst. Dabei werden aber weiterhin die Berechnungen des GameClients durch die jeweiligen Resultate des Servers √ºberschrieben, sobald die Netzwerkpakete ankommen. Das Thema Lag-Compensation ist sehr komplex und wird vielleicht in einem sp√§teren Artikel n√§her beleuchtet.</div></div><p>Godot 4 bietet zwei neue High-Level-Komponenten, die uns erm√∂glichen, <em>Scene Replication</em> durchzuf√ºhren, ohne uns um die darunterliegende RPC-Kommunikation k√ºmmern zu m√ºssen:</p><dl><dt><a href=https://docs.godotengine.org/en/stable/classes/class_multiplayersynchronizer.html target=_blank rel="noopener nofollow noreferrer">MultiplayerSynchronizer</a></dt><dd>Synchronisiert angegebene Properties (z.B. Positionsdaten) zwischen den Netzwerkteilnehmern. Der Standardwert f√ºr den Synchronisierungsintervall ist variabel und entspricht den aktuellen Spiel-FPS. M√∂chte man also eine feste Tickrate wie in vielen First Person Shootern (bspw. Counter-Strike: Global Offensive) haben, muss man dies √ºber &ldquo;Replication Interval&rdquo; auf jedem <code>MultiplayerSynchronizer</code> oder zentral in den Projekteinstellungen konfigurieren.</dd><dt><a href=https://docs.godotengine.org/en/stable/classes/class_multiplayerspawner.html target=_blank rel="noopener nofollow noreferrer">MultiplayerSpawner</a></dt><dd>Repliziert spawnbare Nodes von der Netzwerkautorit√§t, in unserem Fall dem Server, an die anderen Netzwerkteilnehmer, in unserem Fall also alle Clients.</dd></dl><p>Als Beispiel werden im Laufe des Artikels der GameClient und der WorldServer so erweitert, dass f√ºr jeden verbundenen GameClient eine Spielfigur erscheint und vom zugeh√∂rigen GameClient gesteuert werden kann. Um das Beispiel so einfach wie m√∂glich zu halten, basiert die Steuerung auf dem &ldquo;Basic Movement&rdquo;-Template von <code>CharacterBody3D</code>, sodass sich die Figuren nach links, rechts, vor und zur√ºck bewegen und au√üerdem springen k√∂nnen.</p><p>Bevor wir nun aber wirklich beginnen, soll das folgende Ergebnisvideo noch etwas motivieren:</p><video controls autoplay>
<source src=/images/blog/2023/scene-replication/scene_replication_in_action.webm type=video/webm>Your browser does not support the video tag.</video><h3 class="title is-4" id=die-player-szene>Die Player-Szene</h3><figure class="title is-6 is-pulled-left"><img src=/images/blog/2023/scene-replication/player_scene_world_server.webp alt="Aufbau der Player-Szene"><figcaption><h4>Aufbau der Player-Szene</h4></figcaption></figure><p>Die Player-Szene ist, wie man im zugeh√∂rigen Screenshot sehen kann, eigentlich ganz simpel aufgebaut. Unser oberster Knoten ist ein <code>CharacterBody3D</code>, wie es wahrscheinlich bei jedem 3D Godot-Projekt f√ºr die Spielfigur der Fall ist. Dementsprechend gibt es als Kinder, wie gef√ºhlt in jedem zweiten Beispiel, ein <code>CollisionShape3D</code> mit <code>CapsuleShape3D</code> als <code>Shape</code> und eine <code>MeshInstance3D</code> mit <code>CapsuleMesh</code> als <code>Mesh</code>. Es werden fast alle Standardeinstellungen belassen, nur als <code>position</code>, unterhalb von Transform, verwenden wir (0, 1, 0) als Vektor, damit nichts im Boden h√§ngt. Zus√§tzlich gibt es noch eine <code>Camera3D</code>, die als Spielerkamera dient. Die genauen Werte der Kamera sind f√ºr das Tutorial nicht so wichtig, man sollte nur neben der Spielfigur noch etwas von der Umgebung sehen k√∂nnen. Die Player-Szene existiert sowohl im GameClient als auch im WorldServer, genauso wie die jeweiligen Skripte.</p><figure class="title is-6 is-pulled-right"><img src=/images/blog/2023/scene-replication/player_input_inspector.webp alt="Konfiguration des PlayerInputs"><figcaption><h4>Konfiguration des PlayerInputs</h4></figcaption></figure><p>Kommen wir nun zu den beiden <em>neuen</em> Knoten &ldquo;ServerSynchronizer&rdquo; und &ldquo;PlayerInput&rdquo;. Dabei handelt es sich um Knoten vom Typ <code>MultiplayerSynchronizer</code>, und sie nehmen uns das Synchronisieren von Properties ab. Es l√§sst sich f√ºr jeden <code>MultiplayerSynchronizer</code> einzeln bestimmen, ob man bspw. einen abweichenden Synchronisierungsintervall benutzen m√∂chte.</p><h4 class="title is-5" id=der-playerinput-knoten>Der PlayerInput-Knoten</h4><p>Die Aufgabe von &ldquo;PlayerInput&rdquo; ist es, die Eingaben des jeweiligen Spielers im GameClient abzufangen und an den Server zu schicken. Das kann man auch schon an den abgebildeten Properties von <code>PlayerInput.gd</code> erahnen, die wir uns dann gleich im Skript noch n√§her ansehen werden. Als <code>RootPath</code> ist <code>PlayerInput</code> ausgew√§hlt, da der GameClient nur innerhalb (und unterhalb) dieses Knotens die Erlaubnis besitzen soll, Eingabedaten zu verschicken, da die Ergebnisse ja vom Server berechnet werden sollen.</p><p>Wie man im Screenshot des zugeh√∂rigen Replication-Tabs erkennen kann, wird ein Property namens <code>direction</code> via <code>Sync</code> synchronisiert. Dieses Property beinhaltet den Eingabevektor des Spielers bzw. GameClients und soll vom Server genutzt werden, um die Geschwindigkeit und die Position zu berechnen.</p><figure class="title is-6 center"><img src=/images/blog/2023/scene-replication/player_input_properties.webp alt="Replication-Tab des PlayerInputs"><figcaption><h4>Replication-Tab des PlayerInputs</h4></figcaption></figure><p>Generell hat man mit <code>Spawn</code>, <code>Sync</code> und <code>Watch</code> drei m√∂gliche Einstellungen, um die Synchronisierung zu beeinflussen. <code>Spawn</code> synchronisiert das Property direkt beim Spawnen, also w√§hrend des Einf√ºgens des Knotens in die Szene. <code>Sync</code> synchronisiert das Property im konfigurierten Intervall. <code>Watch</code> synchronisiert das Property zuverl√§ssig im konfigurierten Intervall, sofern sich das Property ver√§ndert hat.</p><div class="message is-info"><div class=message-body><code>Watch</code> ist noch ganz frisch und erst mit Godot 4.1 dazugekommen. Von der Beschreibung klingt es nach der besseren Alternative zu <code>Sync</code>, da nur dann synchronisiert wird, wenn sich auch etwas ge√§ndert hat. Ich habe es mit <code>Sync</code> gemacht, da ich einerseits das Beispiel f√ºr diesen Artikel vor Godot 4.1 fertig und getestet hatte und mich andererseits am <a href=https://godotengine.org/article/multiplayer-in-godot-4-0-scene-replication/ target=_blank rel="noopener nofollow noreferrer">Blog-Artikel</a> von Fabio Alessandrelli orientieren wollte.</div></div><p>Kommen wir nun zum zugeh√∂rigen Skript <code>player_input.gd</code>. Wie vorher bereits erw√§hnt, werden dort alle m√∂glichen Spielereingaben ausgelesen und dann an den Server geschickt. F√ºr die vorgesehenen Eingabem√∂glichkeiten reichen die zwei Variablen <code>jumping</code> und <code>direction</code> aus. <code>jumping</code> zeigt dabei an, ob gesprungen werden soll, und <code>direction</code> als <code>Vector2</code> beinhaltet die Bewegungsrichtung des Spielers.</p><p>In Zeile 8 innerhalb der <code>_ready()</code>-Funktion wird bestimmt, ob der &ldquo;PlayerInput&rdquo;-Knoten aktiv sein soll oder nicht. Selbstverst√§ndlich soll der Knoten nur dann aktiv sein, wenn es sich um den &ldquo;PlayerInput&rdquo;-Knoten des aktiven GameClients handelt, da man ansonsten alle anderen Spielfiguren ebenfalls zeitgleich steuern w√ºrde. Innerhalb der <code>_process()</code>-Funktion bestimmen wir die Eingaben f√ºr <code>direction</code>, daf√ºr bedienen wir uns der Funktion <code>Input.get_vector()</code>, um so direkt den passenden <code>Vector2</code>-Wert zu bekommen. Die Sprungeingabe wird realisiert, indem wir die <code>jump()</code>-Funktion als RPC aufrufen, was dank <code>@rpc("call_local")</code> nicht nur auf dem Server, sondern auch lokal ausgef√ºhrt wird.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#66d9ef>extends</span> MultiplayerSynchronizer
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>var</span> jumping :<span style=color:#f92672>=</span> false
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>var</span> direction :<span style=color:#f92672>=</span> <span style=color:#a6e22e>Vector2</span>()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#66d9ef>func</span> _ready() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>	set_process(get_multiplayer_authority() <span style=color:#f92672>==</span> multiplayer<span style=color:#f92672>.</span>get_unique_id())
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#66d9ef>func</span> _process(delta: <span style=color:#a6e22e>float</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>	direction <span style=color:#f92672>=</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span>get_vector(<span style=color:#e6db74>&#34;ui_left&#34;</span>, <span style=color:#e6db74>&#34;ui_right&#34;</span>, <span style=color:#e6db74>&#34;ui_up&#34;</span>, <span style=color:#e6db74>&#34;ui_down&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span>is_action_just_pressed(<span style=color:#e6db74>&#34;ui_accept&#34;</span>):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>		jump<span style=color:#f92672>.</span>rpc()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#960050;background-color:#1e0010>@</span>rpc(<span style=color:#e6db74>&#34;call_local&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#66d9ef>func</span> jump():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>	jumping <span style=color:#f92672>=</span> true</span></span></code></pre></div><h4 class="title is-5" id=das-player-skript>Das Player-Skript</h4><p>Nachdem wir uns angesehen haben, wie die Eingabedaten gesammelt und an den Server gesendet werden, schauen wir uns deren Verarbeitung im Skript <code>player.gd</code> an, welches an unserem Hauptknoten <code>Player</code> h√§ngt. Die Property-Deklaration d√ºrfte ziemlich gew√∂hnlich aussehen, au√üer dem Property <code>player</code> bzw. dem zugeh√∂rigen Setter. Dieser Wert wird vom Server bei der Erstellung gesetzt, und im Setter setzen wir dann die √ºbergebene ID als <code>MultiplayerAuthority</code> f√ºr unseren <code>PlayerInput</code>-Knoten. Dadurch k√∂nnen wir, wie im vorigen Abschnitt gezeigt, in der <code>_ready()</code>-Funktion des <code>PlayerInput</code>-Knotens die √úberpr√ºfung machen, ob das Skript ausgef√ºhrt werden soll oder nicht.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#66d9ef>extends</span> CharacterBody3D
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#66d9ef>const</span> SPEED <span style=color:#f92672>=</span> <span style=color:#ae81ff>5.0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#66d9ef>const</span> JUMP_VELOCITY <span style=color:#f92672>=</span> <span style=color:#ae81ff>4.5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#75715e># Get the gravity from the project settings to be synced with RigidBody nodes.</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#66d9ef>var</span> gravity: <span style=color:#a6e22e>float</span> <span style=color:#f92672>=</span> ProjectSettings<span style=color:#f92672>.</span>get_setting(<span style=color:#e6db74>&#34;physics/3d/default_gravity&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#75715e># Set by server (authority), synchronized on spawn</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>var</span> player :<span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>	set(id):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>		player <span style=color:#f92672>=</span> id
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>		<span style=color:#f92672>$</span>PlayerInput<span style=color:#f92672>.</span>set_multiplayer_authority(id)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>onready</span> <span style=color:#66d9ef>var</span> input <span style=color:#f92672>=</span> <span style=color:#f92672>$</span>PlayerInput</span></span></code></pre></div><p>In der <code>_ready()</code>-Funktion pr√ºfen wir, ob der GameClient f√ºr die Spielfigur zust√§ndig ist. Sollte er daf√ºr zust√§ndig sein, setzen wir <code>Camera3D</code> als aktuelle Kamera.</p><p>Innerhalb von <code>_physics_process()</code> findet dann, wie gewohnt, die Verarbeitung der Eingabedaten statt, nur dass diese nun nicht erst ermittelt werden m√ºssen, sondern dank des <code>MultiplayerSynchronizers</code> in <code>input.direction</code> bereits vorbereitet sind.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#66d9ef>func</span> _ready() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>	<span style=color:#66d9ef>if</span> player <span style=color:#f92672>==</span> multiplayer<span style=color:#f92672>.</span>get_unique_id():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>		<span style=color:#f92672>$</span>Camera3D<span style=color:#f92672>.</span>current <span style=color:#f92672>=</span> true
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#66d9ef>func</span> _physics_process(delta: <span style=color:#a6e22e>float</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>	<span style=color:#75715e># Add the gravity.</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> is_on_floor():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>		velocity<span style=color:#f92672>.</span>y <span style=color:#f92672>-=</span> gravity <span style=color:#f92672>*</span> delta
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>	<span style=color:#75715e># Handle Jump.</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>	<span style=color:#66d9ef>if</span> input<span style=color:#f92672>.</span>jumping <span style=color:#f92672>and</span> is_on_floor():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>		velocity<span style=color:#f92672>.</span>y <span style=color:#f92672>=</span> JUMP_VELOCITY
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>	input<span style=color:#f92672>.</span>jumping <span style=color:#f92672>=</span> false
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>	<span style=color:#66d9ef>var</span> direction :<span style=color:#f92672>=</span> (transform<span style=color:#f92672>.</span>basis <span style=color:#f92672>*</span> <span style=color:#a6e22e>Vector3</span>(input<span style=color:#f92672>.</span>direction<span style=color:#f92672>.</span>x, <span style=color:#ae81ff>0</span>, input<span style=color:#f92672>.</span>direction<span style=color:#f92672>.</span>y))<span style=color:#f92672>.</span>normalized()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>	<span style=color:#66d9ef>if</span> direction:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>		velocity<span style=color:#f92672>.</span>x <span style=color:#f92672>=</span> direction<span style=color:#f92672>.</span>x <span style=color:#f92672>*</span> SPEED
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>		velocity<span style=color:#f92672>.</span>z <span style=color:#f92672>=</span> direction<span style=color:#f92672>.</span>z <span style=color:#f92672>*</span> SPEED
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>	<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span>		velocity<span style=color:#f92672>.</span>x <span style=color:#f92672>=</span> move_toward(velocity<span style=color:#f92672>.</span>x, <span style=color:#ae81ff>0</span>, SPEED)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span>		velocity<span style=color:#f92672>.</span>z <span style=color:#f92672>=</span> move_toward(velocity<span style=color:#f92672>.</span>z, <span style=color:#ae81ff>0</span>, SPEED)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span>	move_and_slide()</span></span></code></pre></div><h4 class="title is-5" id=der-serversynchronizer-knoten>Der ServerSynchronizer-Knoten</h4><figure class="title is-6 is-pulled-right"><img src=/images/blog/2023/scene-replication/server_synchronizer_inspector.webp alt="Konfiguration des ServerSynchronizers"><figcaption><h4>Konfiguration des ServerSynchronizers</h4></figcaption></figure><p>Nachdem nun im Player-Skript die eigentliche Bewegung der Spielfigur stattgefunden hat, m√ºssen die relevanten Ergebnisdaten vom Server an alle verbundenen GameClients repliziert werden. Das machen wir mit Hilfe des &ldquo;ServerSynchronizers&rdquo;. Da dieser Synchronizer direkt mit den Properties von unserem Player-Knoten arbeitet, ist der Player-Knoten auch als <code>Root Path</code> hinterlegt. Alle anderen Optionen bleiben auf ihren Standardwerten. Wie man im nachfolgenden Screenshot des zugeh√∂rigen Replication-Tabs sehen kann, werden drei Werte mit Hilfe dieses Knotens √ºbermittelt: <code>player</code>, <code>position</code> und <code>velocity</code>.</p><p>Hinter <code>player</code> verbirgt sich die einzigartige Multiplayer-ID des GameClients, die vom Server vergeben wird, sobald ein neuer Player gespawnt wird. Bei <code>position</code> und <code>velocity</code> handelt es sich um die bekannten <code>Vector3</code>-Werte aus <a href=https://docs.godotengine.org/en/stable/classes/class_node3d.html target=_blank rel="noopener nofollow noreferrer"><code>Node3D</code></a> bzw. <a href=https://docs.godotengine.org/en/stable/classes/class_characterbody3d.html target=_blank rel="noopener nofollow noreferrer"><code>CharacterBody3D</code></a>, welche die aktuelle Position bzw. die aktuelle Geschwindigkeit beinhalten. Sowohl die Position als auch die Geschwindigkeit sollen nicht nur bei der Knotenerstellung (w√§hrend des Spawns) synchronisiert werden, sondern auch regelm√§√üig zur Laufzeit.</p><figure class="title is-6 center"><img src=/images/blog/2023/scene-replication/server_synchronizer_properties.webp alt="Replication-Tab des ServerSynchronizers"><figcaption><h4>Replication-Tab des ServerSynchronizers</h4></figcaption></figure><p>Damit ist die Besprechung der Player-Szene soweit abgeschlossen. Unser Spiel ist nun in der Lage, zur Laufzeit Eingabedaten auf den GameClients einzusammeln, diese auf dem Server zu verarbeiten und die relevanten Ergebnisdaten dann wieder an die GameClients zu schicken. Das Problem ist nur, wie kommen denn die jeweiligen Instanzen der Player-Szene in das Spiel?</p><h3 class="title is-4" id=die-level-szene>Die Level-Szene</h3><figure class="title is-6 is-pulled-left"><img src=/images/blog/2023/scene-replication/level_scene_world_server.webp alt="Aufbau der Level-Szene"><figcaption><h4>Aufbau der Level-Szene</h4></figcaption></figure><p>Im nebenstehenden Screenshot sieht man den Aufbau meiner Level-Szene. Sie ist m√∂glichst einfach gehalten, damit wir uns auf das Wesentliche konzentrieren k√∂nnen. Daher gibt es einzig einen Boden (Floor), der ein <a href=https://docs.godotengine.org/en/stable/classes/class_planemesh.html#class-planemesh target=_blank rel="noopener nofollow noreferrer"><code>PlaneMesh</code></a> mit 25mx25m als <code>MeshInstance3D</code> als Kind hat. Das andere Kind <code>CollisionShape3D</code> ist ein <a href=https://docs.godotengine.org/en/stable/classes/class_worldboundaryshape3d.html target=_blank rel="noopener nofollow noreferrer"><code>WorldBoundaryShape3D</code></a>, sodass kein GameClient irgendwo herunterfallen kann. Das <code>OmniLight3D</code> sorgt f√ºr etwas Licht, auf die genauen Werte kommt es f√ºr dieses Beispiel nicht an. Bei <code>Objects</code> und <code>Players</code> handelt es sich um leere Container, wo dann Objekte bzw. Spielfiguren hineingespawnt werden sollen. Zu guter Letzt kommt noch der <code>PlayerSpawner</code>. Dabei handelt es sich um die eingangs erw√§hnte zweite High-Level-Komponente <code>MultiplayerSpawner</code> f√ºr die Scene Replication. Dieser <code>PlayerSpawner</code> ist daf√ºr zust√§ndig, dass alle GameClients es mitbekommen, wenn eine neue Spielfigur gespawnt wird. Um dies zu erreichen, muss der <code>PlayerSpawner</code> zuerst richtig konfiguriert werden.</p><figure class="title is-6 is-pulled-right"><img src=/images/blog/2023/scene-replication/multiplayer_spawner_inspector.webp alt="Konfiguration des PlayerSpawners"><figcaption><h4>Konfiguration des PlayerSpawners</h4></figcaption></figure><p>Wie wir im nebenstehenden Screenshot des Inspectors vom <code>PlayerSpawner</code>-Knoten sehen k√∂nnen, gibt es zwei Properties, die wir anpassen m√ºssen, um das gew√ºnschte Ergebnis zu erreichen. Zuerst muss der <code>Spawn Path</code> auf den <code>Players</code>-Knoten gesetzt werden. Diese Konfiguration hat zur Folge, dass nun der <code>Players</code>-Knoten √ºberwacht wird. Sobald eine Instanz von einem Element der <code>Auto Spawn List</code> als direktes Kind des <code>Players</code>-Knotens erscheint, wird dies an alle GameClients kommuniziert, sodass die dortigen <code>PlayerSpawner</code>-Knoten ebenfalls einen passend instanziierten Kindknoten erstellen k√∂nnen. Damit unser Spawner nun also Instanzen der Player-Szene replizieren kann, muss diese Szene in die <code>Auto Spawn List</code> aufgenommen werden.</p><p>Der Aufbau der Level-Szene ist auf dem GameClient und dem WorldServer (fast) identisch. Der WorldServer hat zus√§tzlich noch ein aktives Skript, welches das Hinzuf√ºgen und Entfernen der Spielfiguren kontrolliert, wenn sich GameClients verbinden bzw. trennen. Daf√ºr werden in der zugeh√∂rigen <code>_ready()</code>-Funktion die Funktionen <code>add_player()</code> und <code>del_player()</code> mit den zugeh√∂rigen Signalen verbunden. In <code>_exit_tree()</code> r√§umen wir nat√ºrlich üòâ auf und beenden das Belauschen der Signale.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#66d9ef>extends</span> Node3D
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#66d9ef>const</span> SPAWN_RANDOM :<span style=color:#f92672>=</span> <span style=color:#ae81ff>5.0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>onready</span> <span style=color:#66d9ef>var</span> players :<span style=color:#f92672>=</span> <span style=color:#f92672>$</span>Players
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#66d9ef>func</span> _ready() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>	<span style=color:#66d9ef>for</span> id <span style=color:#f92672>in</span> multiplayer<span style=color:#f92672>.</span>get_peers():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>		add_player(id)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>	get_multiplayer()<span style=color:#f92672>.</span>peer_connected<span style=color:#f92672>.</span>connect(add_player)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>	get_multiplayer()<span style=color:#f92672>.</span>peer_disconnected<span style=color:#f92672>.</span>connect(del_player)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#66d9ef>func</span> _exit_tree():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>	get_multiplayer()<span style=color:#f92672>.</span>peer_connected<span style=color:#f92672>.</span>disconnect(add_player)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>	get_multiplayer()<span style=color:#f92672>.</span>peer_disconnected<span style=color:#f92672>.</span>disconnect(del_player)</span></span></code></pre></div><p>Die Funktion <code>add_player()</code> hat die Aufgabe, die Player-Szene passend zu instanziieren und dann dem <code>Players</code>-Knoten als direktes Kind hinzuzuf√ºgen. Daf√ºr instanziieren wir zuerst nat√ºrlich die eigentlich Player-Szene und hinterlegen die √ºbergebene Netzwerk-ID des zugeh√∂rigen GameClients im <code>player</code>-Property. Anschlie√üend schaffen wir mit etwas Zufallsmagie eine Startposition, benennen den Knoten nach der Netzwerk-ID und f√ºgen ihn zum <code>Players</code>-Knoten hinzu.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#66d9ef>func</span> add_player(id: <span style=color:#a6e22e>int</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>	<span style=color:#66d9ef>var</span> character :<span style=color:#f92672>=</span> preload(<span style=color:#e6db74>&#34;res://scenes/levels/player.tscn&#34;</span>)<span style=color:#f92672>.</span>instantiate()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>	character<span style=color:#f92672>.</span>player <span style=color:#f92672>=</span> id
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>	<span style=color:#75715e># Randomize character position</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>	<span style=color:#66d9ef>var</span> pos :<span style=color:#f92672>=</span> <span style=color:#a6e22e>Vector2</span><span style=color:#f92672>.</span>from_angle(randf() <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> PI)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>	character<span style=color:#f92672>.</span>position <span style=color:#f92672>=</span> <span style=color:#a6e22e>Vector3</span>(pos<span style=color:#f92672>.</span>x <span style=color:#f92672>*</span> SPAWN_RANDOM <span style=color:#f92672>*</span> randf(), <span style=color:#ae81ff>0</span>, pos<span style=color:#f92672>.</span>y <span style=color:#f92672>*</span> SPAWN_RANDOM <span style=color:#f92672>*</span> randf())
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>	character<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> str(id)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>	players<span style=color:#f92672>.</span>add_child(character, true)</span></span></code></pre></div><p>Sollte ein GameClient die Verbindung beenden, wird die Funktion <code>del_player()</code> aufgerufen. Dort wird gepr√ºft, ob es einen Knoten unterhalb des <code>Players</code>-Knotens mit dem Namen der √ºbergebenen Netzwerk-ID gibt. Falls dem so ist, wird dieser gel√∂scht.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#66d9ef>func</span> del_player(id: <span style=color:#a6e22e>int</span>):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> players<span style=color:#f92672>.</span>has_node(str(id)):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>	players<span style=color:#f92672>.</span>get_node(str(id))<span style=color:#f92672>.</span>queue_free()</span></span></code></pre></div><p>Dank richtig konfiguriertem <code>PlayerSpawner</code> werden die hinzugef√ºgten bzw. entfernten Player-Szenen-Knoten unterhalb des <code>Players</code>-Knotens automatisch an alle GameClients repliziert. So k√∂nnen sich nun GameClients dynamisch verbinden bzw. trennen, und alle anderen GameClients bekommen dies mit. Allen, die ein eigenes Beispielprojekt genommen haben, gratuliere ich an dieser Stelle üëè, da nun alles Wesentliche gezeigt wurde. Allen anderen gratuliere ich ebenfalls üëè, aber freue mich zus√§tzlich dar√ºber, dass wir nun alles noch in das Beispielprojekt aus der Tutorialserie integrieren d√ºrfen.</p><h3 class="title is-4" id=integration-in-das-beispielprojekt-aus-der-tutorialserie>Integration in das Beispielprojekt aus der Tutorialserie</h3><p>Nochmal zur Rekapitulation: Das Beispielprojekt aus der <a href=/de/tags/networking-tutorial/>Tutorialserie</a> besteht aus insgesamt 4 Komponenten - AuthenticationServer, GatewayServer, WorldServer und GameClient. Authentication- und GatewayServer sind ausschlie√ülich w√§hrend des Logins involviert, welcher bereits abgeschlossen ist, wenn eine Spielfigur erstellt und mit einem GameClient verkn√ºpft werden soll. Daher brauchen wir dort keine Anpassungen vornehmen und k√∂nnen sie, wie auch bisher in diesem Artikel, weiter ignorieren.</p><h3 class="title is-5" id=integration-in-den-worldserver>Integration in den WorldServer</h3><figure class="title is-6 is-pulled-left"><img src=/images/blog/2023/scene-replication/start_scene_world_server.webp alt="Aufbau der Main-Szene"><figcaption><h4>Aufbau der Main-Szene</h4></figcaption></figure><p>K√ºmmern wir uns zuerst um die <code>Main</code>-Szene des WorldServers. Dort bekommt der <code>WorldServer</code>-Knoten zwei Kinder. Einmal <code>Level</code> als Elternknoten des zu ladenden Levels. Und dann noch einen Knoten namens <code>LevelSpawner</code>, der vom Typ <code>MultiplayerSpawner</code> ist und das geladene Level replizieren soll. Daher w√§hlen wir als <code>Spawn Path</code> den Geschwisterknoten <code>Level</code> aus, setzen ein <code>Spawn Limit</code> von 1, da wir maximal ein Level repliziert haben m√∂chten und f√ºgen unsere Level-Szene zur <code>Auto Spawn List</code> hinzu. Dabei dient dieses Limit rein zur Absicherung, da unser Skript nur eine Level-Szene instanziiert.</p><p>Das Skript <code>main.gd</code>, welches zum <code>Main</code>-Knoten geh√∂rt, muss leicht erweitert werden. Die bisherige Funktionalit√§t, die den angepassten Netzwerkpfad konfiguriert und den Server startet, muss nun so angepasst werden, dass sie unsere Level-Szene l√§dt, sobald der Server gestartet ist.</p><figure class="title is-6 is-pulled-right"><img src=/images/blog/2023/scene-replication/level_spawner_inspector.webp alt="Konfiguration des LevelSpawners"><figcaption><h4>Konfiguration des LevelSpawners</h4></figcaption></figure><p>Um dies zu erreichen, erstellen wir eine neue Funktion <code>change_level()</code> (ab Zeile 14), die die zu ladende Szene als Parameter √ºbergeben bekommt. Um zuk√ºnftig auch unterschiedliche Level-Szenen zu unterst√ºtzen und gleichzeitig daf√ºr zu sorgen, dass immer nur eine aktiv ist, l√∂schen wir m√∂gliche andere Szenen bzw. Knoten unterhalb des <code>Level</code>-Knotens. Anschlie√üend f√ºgen wir die instanziierte Szene dem <code>Level</code>-Knoten als Kind hinzu.</p><p>Es ist wichtig, dass die Szene erst geladen wird, wenn der Server gestartet ist. Ansonsten w√ºrde unser <code>LevelSpawner</code> bereits versuchen, das Level zu replizieren, was zu Fehler zur Folge h√§tte, solange keine Netzwerkverbindung gestartet ist. Daher verkn√ºpfen wir den Aufruf von <code>change_level()</code> mit dem Signal <code>started</code> unseres Servers. Die zu ladende Szene binden wir direkt an das <code>Callable</code> von <code>change_level</code> an.</p><p>Nun fehlt nur noch das Signal <code>started</code> unseres Netzwerkservers, damit alles reibungslos klappt. Dabei handelt es sich um ein Signal, welches nach dem Aufruf von <code>create_server</code> emittiert wird, sofern der R√ºckgabewert <code>OK</code> ist. Um die √úbersichtlichkeit dieses Artikels nicht noch weiter zu verschlechtern, habe ich diese zwei Zeilen weggelassen. Man findet sie aber nat√ºrlich im zugeh√∂rigen Github-Repository.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Node</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>onready</span> <span style=color:#66d9ef>var</span> world_server :<span style=color:#f92672>=</span> <span style=color:#f92672>$</span>WorldServer
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>onready</span> <span style=color:#66d9ef>var</span> spawner :<span style=color:#f92672>=</span> <span style=color:#f92672>$</span>WorldServer<span style=color:#f92672>/</span>LevelSpawner
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#66d9ef>onready</span> <span style=color:#66d9ef>var</span> level :<span style=color:#f92672>=</span> <span style=color:#f92672>$</span>WorldServer<span style=color:#f92672>/</span>Level
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#66d9ef>func</span> _ready() <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>	get_tree()<span style=color:#f92672>.</span>set_multiplayer(SceneMultiplayer<span style=color:#f92672>.</span>new(),
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>		<span style=color:#f92672>^</span><span style=color:#e6db74>&#34;/root/Main/WorldServer&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>	world_server<span style=color:#f92672>.</span>started<span style=color:#f92672>.</span>connect(change_level<span style=color:#f92672>.</span>bind(
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>		load(<span style=color:#e6db74>&#34;res://scenes/levels/level.tscn&#34;</span>)))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>	world_server<span style=color:#f92672>.</span>startup()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#66d9ef>func</span> change_level(scene: <span style=color:#a6e22e>PackedScene</span>):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>	<span style=color:#75715e># Remove old level if any.</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>	<span style=color:#66d9ef>for</span> c <span style=color:#f92672>in</span> level<span style=color:#f92672>.</span>get_children():
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>		level<span style=color:#f92672>.</span>remove_child(c)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>		c<span style=color:#f92672>.</span>queue_free()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>	<span style=color:#75715e># Add new level.</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>	level<span style=color:#f92672>.</span>add_child(scene<span style=color:#f92672>.</span>instantiate())</span></span></code></pre></div><h3 class="title is-5" id=integration-in-den-gameclient>Integration in den GameClient</h3><p>Die Herausforderung f√ºr die Integration in den GameClient ist es, die Struktur der Main-Szene des WorldServers im GameClient nachzubauen, nachdem wir ein Logintoken vom GatewayServer erhalten haben, aber <strong>bevor</strong> wir den WorldServer mit dem Logintoken kontaktieren. Aus diesem Grund m√ºssen wir die Funktion <code>_login_callback()</code> im Skript <code>main.gd</code> des GameClients erweitern. Um den Kontext besser verst√§ndlich zu machen, habe ich die gesamte Funktion im nachfolgenden Code-Block abgebildet und die neuen Zeilen hervorgehoben. Die Funktion wird aufgerufen, wenn wir im GameClient eine Antwort des GatewayServers erhalten haben. Wenn die Antwort positiv war, wir also auch ein Logintoken bekommen haben, m√∂chten wir mit dem WorldServer in Kontakt treten. Daf√ºr erstellen wir den <code>WorldServer</code>-Knoten, verkn√ºpfen das zugeh√∂rige Skript, hinterlegen eine neue Instanz von <code>MultiplayerAPI</code> f√ºr den <code>WorldServer</code>-Knoten und die notwendigen Daten bzw. den Callback.</p><p>Nun kommt die Erweiterung: Wir bauen die Struktur der Main-Szene des WorldServers nach. Damit das gelingt, m√ºssen wir einen <code>Node</code> namens <code>Level</code> und einen <code>MultiplayerSpawner</code> namens <code>LevelSpawner</code> unterhalb vom <code>WorldServer</code>-Knoten hinzuf√ºgen. Zus√§tzlich m√ºssen wir unseren <code>LevelSpawner</code> noch passend konfigurieren (Zeilen 20-22).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-gdscript data-lang=gdscript><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#66d9ef>func</span> _login_callback(return_code: <span style=color:#a6e22e>int</span>, token: <span style=color:#a6e22e>String</span>) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>	gateway_server<span style=color:#f92672>.</span>queue_free()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>	gateway_server <span style=color:#f92672>=</span> null
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>	<span style=color:#66d9ef>if</span> return_code <span style=color:#f92672>==</span> OK:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>		print(<span style=color:#e6db74>&#34;Current Token is: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> token)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>		world_server <span style=color:#f92672>=</span> <span style=color:#a6e22e>Node</span><span style=color:#f92672>.</span>new()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>		world_server<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;WorldServer&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>		add_child(world_server)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>		world_server<span style=color:#f92672>.</span>set_script(load(<span style=color:#e6db74>&#34;res://scenes/network/world_server.gd&#34;</span>))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>		get_tree()<span style=color:#f92672>.</span>set_multiplayer(SceneMultiplayer<span style=color:#f92672>.</span>new(), <span style=color:#f92672>^</span><span style=color:#e6db74>&#34;/root/Main/WorldServer&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>		world_server<span style=color:#f92672>.</span>world_server <span style=color:#f92672>=</span> world_server_data
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>		world_server<span style=color:#f92672>.</span>callback <span style=color:#f92672>=</span> _world_server_callback
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>		<span style=color:#66d9ef>var</span> levelNode <span style=color:#f92672>=</span> <span style=color:#a6e22e>Node</span><span style=color:#f92672>.</span>new()
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>		levelNode<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Level&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>		world_server<span style=color:#f92672>.</span>add_child(levelNode)
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>		<span style=color:#66d9ef>var</span> levelSpawner :<span style=color:#f92672>=</span> MultiplayerSpawner<span style=color:#f92672>.</span>new()
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>		levelSpawner<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;LevelSpawner&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>		world_server<span style=color:#f92672>.</span>add_child(levelSpawner)
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>		levelSpawner<span style=color:#f92672>.</span>spawn_path <span style=color:#f92672>=</span> levelNode<span style=color:#f92672>.</span>get_path()
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>		levelSpawner<span style=color:#f92672>.</span>spawn_limit <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>		levelSpawner<span style=color:#f92672>.</span>add_spawnable_scene(<span style=color:#e6db74>&#34;res://scenes/levels/level.tscn&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>		world_server<span style=color:#f92672>.</span>login_to_server(token)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>	<span style=color:#66d9ef>else</span> :
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>		print(<span style=color:#e6db74>&#34;Something went wrong‚Ä¶&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>		get_node(<span style=color:#e6db74>&#34;LoginScreen&#34;</span>)<span style=color:#f92672>.</span>reset()</span></span></code></pre></div><p>Sind diese √Ñnderungen gemacht, sollte dem Testlauf eigentlich nichts mehr im Wege stehen. Ich hoffe, dass ich nichts vergessen habe und es auch soweit verst√§ndlich war. Ansonsten gibt es das fertige Projekt im √ºblichen <a href=https://github.com/somethinglikegames/godot4-network-tutorial/tree/scene-replication target=_blank rel="noopener nofollow noreferrer">Github-Repository</a>.</p></div></article><footer class=columns><div class="column has-text-left"><a href=/de/blog/2023/a-small-interim-report/ class="button right"><span class=icon-text><span class=icon><i class="fa fa-angle-left"></i></span><span>Eine kleine Zwischenmeldung</span></span></a></div><div class="column has-text-right"><a href=/de/blog/2023/dtls-security-4.1/ class="button left"><span class=icon-text><span>DTLS-Security-√Ñnderungen mit Godot 4.1</span><span class=icon><i class="fa fa-angle-right"></i></span></span></a></div></footer></div></div></div></section><footer class=footer><div class="container is-fluid has-text-centered"><ul class=socnet-icons><span class=icon><a href=//github.com/somethinglikegames target=_blank rel=noopener title=GitHub class="fab fa-github"></a></span>
<span class=icon><a href=//youtube.com/@somethinglikegames target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></span>
<span id=cloaked-1025d14f3b></span>
<script id=cloaked-script-1025d14f3b>var cloakElement=document.getElementById("cloaked-1025d14f3b"),link=document.createElement("a"),address="ed.semagekilgnihtemos@ofni".split("").reverse().join("");link.href="mailto:"+address,link.classList="far fa-envelope",link.title="email",cloakElement.parentNode.replaceChild(link,cloakElement)</script></ul><p class=copyright><a href=https://www.somethinglikegames.de/de/legal_notice/>Impressum</a> &mdash;
<a href=https://www.somethinglikegames.de/de/privacy_policy/>Datenschutzerkl√§rung</a> &mdash;
¬©2023-2024 Tobias Wink<br>Powered by <a href=https://gohugo.io/ title=0.109.0 target=_blank rel=noopener>Hugo</a></p></div></footer><script src=/js/navbar.min.js defer></script>
<script src=/js/copy-code-button.min.js defer></script></body></html>